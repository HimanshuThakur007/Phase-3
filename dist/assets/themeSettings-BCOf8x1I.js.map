{"version":3,"file":"themeSettings-BCOf8x1I.js","sources":["../../node_modules/react-feather/dist/icons/chevron-down.js","../../node_modules/react-feather/dist/icons/chevron-up.js","../../node_modules/react-feather/dist/icons/settings.js","../../src/feature-modules/phase3/api.tsx","../../src/core/json/phsae3Filter.tsx","../../src/hooks/useReportFilters.tsx","../../src/feature-modules/phase3/ReportFilterRow.tsx","../../node_modules/use-debounce/dist/index.module.js","../../src/InitialPage/themeSettings.tsx"],"sourcesContent":["function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React, { forwardRef } from 'react';\nimport PropTypes from 'prop-types';\nvar ChevronDown = forwardRef(function (_ref, ref) {\n  var _ref$color = _ref.color,\n      color = _ref$color === void 0 ? 'currentColor' : _ref$color,\n      _ref$size = _ref.size,\n      size = _ref$size === void 0 ? 24 : _ref$size,\n      rest = _objectWithoutProperties(_ref, [\"color\", \"size\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    ref: ref,\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: size,\n    height: size,\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    stroke: color,\n    strokeWidth: \"2\",\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }, rest), /*#__PURE__*/React.createElement(\"polyline\", {\n    points: \"6 9 12 15 18 9\"\n  }));\n});\nChevronDown.propTypes = {\n  color: PropTypes.string,\n  size: PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n};\nChevronDown.displayName = 'ChevronDown';\nexport default ChevronDown;","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React, { forwardRef } from 'react';\nimport PropTypes from 'prop-types';\nvar ChevronUp = forwardRef(function (_ref, ref) {\n  var _ref$color = _ref.color,\n      color = _ref$color === void 0 ? 'currentColor' : _ref$color,\n      _ref$size = _ref.size,\n      size = _ref$size === void 0 ? 24 : _ref$size,\n      rest = _objectWithoutProperties(_ref, [\"color\", \"size\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    ref: ref,\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: size,\n    height: size,\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    stroke: color,\n    strokeWidth: \"2\",\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }, rest), /*#__PURE__*/React.createElement(\"polyline\", {\n    points: \"18 15 12 9 6 15\"\n  }));\n});\nChevronUp.propTypes = {\n  color: PropTypes.string,\n  size: PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n};\nChevronUp.displayName = 'ChevronUp';\nexport default ChevronUp;","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React, { forwardRef } from 'react';\nimport PropTypes from 'prop-types';\nvar Settings = forwardRef(function (_ref, ref) {\n  var _ref$color = _ref.color,\n      color = _ref$color === void 0 ? 'currentColor' : _ref$color,\n      _ref$size = _ref.size,\n      size = _ref$size === void 0 ? 24 : _ref$size,\n      rest = _objectWithoutProperties(_ref, [\"color\", \"size\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    ref: ref,\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: size,\n    height: size,\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    stroke: color,\n    strokeWidth: \"2\",\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }, rest), /*#__PURE__*/React.createElement(\"circle\", {\n    cx: \"12\",\n    cy: \"12\",\n    r: \"3\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z\"\n  }));\n});\nSettings.propTypes = {\n  color: PropTypes.string,\n  size: PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n};\nSettings.displayName = 'Settings';\nexport default Settings;","import { useCallback, useState } from \"react\";\nimport useFetch from \"../../hooks/useFetch\";\n\n// === Interfaces ===\nexport interface BranchItem {\n  value: string | number;\n  label: string;\n}\n\nexport interface StateItem {\n  value: string | number;\n  label: string;\n}\n\nexport interface DropdownItem {\n  value: string | number;\n  label: string;\n}\n\n// Define dropdown keys\nexport type DropdownKey =\n  | \"Global_HBT\"\n  | \"Local_HBT\"\n  | \"Sales_Bucket\"\n  | \"Stock_Bucket\"\n  | \"Transit_Qty\"\n  | \"Local_Import\";\n\nexport interface DropdownsResponse {\n  status: string;\n  dropdowns: Record<DropdownKey, any[]>;\n}\n\ninterface ApiListResponse<T> {\n  status?: string;\n  total?: number;\n  data?: T[];\n}\n\n// === Custom Hook ===\nexport const useBranchesApi = () => {\n  const callFetch = useFetch();\n\n  // === Branch State ===\n  const [branches, setBranches] = useState<BranchItem[]>([]);\n  const [loadingBranches, setLoadingBranches] = useState<boolean>(false);\n  const [branchesError, setBranchesError] = useState<string | null>(null);\n\n  // === State State ===\n  const [states, setStates] = useState<StateItem[]>([]);\n  const [loadingStates, setLoadingStates] = useState<boolean>(false);\n  const [statesError, setStatesError] = useState<string | null>(null);\n\n  // === Dropdowns State (now includes Local_Import) ===\n  const [dropdowns, setDropdowns] = useState<\n    Record<DropdownKey, DropdownItem[]>\n  >({\n    Global_HBT: [],\n    Local_HBT: [],\n    Sales_Bucket: [],\n    Stock_Bucket: [],\n    Transit_Qty: [],\n    Local_Import: [], // ← Now properly initialized\n  });\n  const [loadingDropdowns, setLoadingDropdowns] = useState<boolean>(false);\n  const [dropdownsError, setDropdownsError] = useState<string | null>(null);\n\n  // === Fetch Branches ===\n  const fetchBranches = useCallback(\n    async (force = false) => {\n      if (!force && branches.length > 0) return branches;\n\n      setLoadingBranches(true);\n      setBranchesError(null);\n\n      try {\n        const result = await callFetch<ApiListResponse<BranchItem>>(\n          \"get-branches\",\n          \"GET\"\n        );\n        const payload = result.got as ApiListResponse<BranchItem> | null;\n\n        if (!payload) {\n          setBranches([]);\n          setBranchesError(\"No response payload\");\n          return [];\n        }\n\n        if (payload.status === \"error\") {\n          setBranches([]);\n          setBranchesError((payload as any).message || \"Server returned error\");\n          return [];\n        }\n\n        const data = Array.isArray(payload.data) ? payload.data : [];\n        const mapped = data\n          .filter((b) => b && b.value != null && b.label != null)\n          .map((b) => ({ value: b.value, label: String(b.label) }));\n\n        setBranches(mapped);\n        return mapped;\n      } catch (err: any) {\n        console.error(\"Error fetching branches:\", err);\n        setBranches([]);\n        setBranchesError(err?.message || \"Failed to load branches\");\n        return [];\n      } finally {\n        setLoadingBranches(false);\n      }\n    },\n    [callFetch, branches]\n  );\n\n  // === Fetch States ===\n  const fetchStates = useCallback(\n    async (force = false, stateFilter?: string) => {\n      if (!force && states.length > 0 && !stateFilter) return states;\n\n      setLoadingStates(true);\n      setStatesError(null);\n\n      try {\n        const url = stateFilter\n          ? `get-states?state=${encodeURIComponent(stateFilter)}`\n          : \"get-states\";\n\n        const result = await callFetch<ApiListResponse<StateItem>>(url, \"GET\");\n        const payload = result.got as ApiListResponse<StateItem> | null;\n\n        if (!payload) {\n          setStates([]);\n          setStatesError(\"No response payload\");\n          return [];\n        }\n\n        if (payload.status === \"error\") {\n          setStates([]);\n          setStatesError((payload as any).message || \"Server returned error\");\n          return [];\n        }\n\n        const data = Array.isArray(payload.data) ? payload.data : [];\n        const mapped = data\n          .filter((s) => s && s.value != null && s.label != null)\n          .map((s) => ({ value: s.value, label: String(s.label) }));\n\n        if (!stateFilter || force) {\n          setStates(mapped);\n        }\n\n        return mapped;\n      } catch (err: any) {\n        console.error(\"Error fetching states:\", err);\n        setStates([]);\n        setStatesError(err?.message || \"Failed to load states\");\n        return [];\n      } finally {\n        setLoadingStates(false);\n      }\n    },\n    [callFetch, states]\n  );\n\n  const fetchDropdowns = useCallback(\n    async (force = false): Promise<Record<DropdownKey, DropdownItem[]>> => {\n      const isCached = Object.values(dropdowns).some((arr) => arr.length > 0);\n      if (!force && isCached) return dropdowns;\n\n      setLoadingDropdowns(true);\n      setDropdownsError(null);\n\n      try {\n        const result = await callFetch<DropdownsResponse>(\n          \"hbt-dropdowns\",\n          \"GET\"\n        );\n        const payload = result.got as DropdownsResponse | null;\n\n        if (!payload || payload.status !== \"ok\") {\n          setDropdownsError(payload?.status || \"No response payload\");\n          return dropdowns;\n        }\n\n        // Initialize with all keys\n        const validDropdowns: Record<DropdownKey, DropdownItem[]> = {\n          Global_HBT: [],\n          Local_HBT: [],\n          Sales_Bucket: [],\n          Stock_Bucket: [],\n          Transit_Qty: [],\n          Local_Import: [],\n        };\n\n        // Process each dropdown\n        Object.entries(payload.dropdowns).forEach(([key, items]) => {\n          if (!(key in validDropdowns) || !Array.isArray(items)) return;\n\n          const dropdownKey = key as DropdownKey;\n\n          // Base filter for all dropdowns\n          let filteredItems = items.filter(\n            (item): item is { value: any; label: any } =>\n              item != null && item.value != null && item.label != null\n          );\n\n          // Special handling per dropdown\n          if (dropdownKey === \"Transit_Qty\") {\n            filteredItems = filteredItems\n              .filter((item) => typeof item.value === \"string\")\n              .map((item) => ({\n                value: String(item.value).trim(),\n                label: String(item.label).trim(),\n              }));\n          } else if (dropdownKey === \"Local_Import\") {\n            filteredItems = filteredItems\n              .filter(\n                (item) =>\n                  typeof item.value === \"string\" && item.value.trim() !== \"\"\n              )\n              .map((item) => ({\n                value: String(item.value).trim(),\n                label: String(item.label).trim(),\n              }));\n          } else if (dropdownKey === \"Sales_Bucket\") {\n            // Filter out the two unwanted items\n            const excludeLabels = [\"6 to 10 Qty\", \"Greater Than 10 Qty\"];\n            filteredItems = filteredItems\n              .filter(\n                (item) => !excludeLabels.includes(String(item.label).trim())\n              )\n              .map((item) => ({\n                value: String(item.value).trim(),\n                label: String(item.label).trim(),\n              }));\n          } else {\n            // Default: trim and stringify\n            filteredItems = filteredItems.map((item) => ({\n              value: String(item.value).trim(),\n              label: String(item.label).trim(),\n            }));\n          }\n\n          validDropdowns[dropdownKey] = filteredItems;\n        });\n\n        console.log(\"Valid Dropdowns:\", validDropdowns);\n        setDropdowns(validDropdowns);\n        return validDropdowns;\n      } catch (err: any) {\n        console.error(\"Error fetching dropdowns:\", err);\n        setDropdownsError(err?.message || \"Failed to load dropdowns\");\n        return dropdowns;\n      } finally {\n        setLoadingDropdowns(false);\n      }\n    },\n    [callFetch, dropdowns]\n  );\n  // === Fetch All ===\n  const fetchAll = useCallback(\n    async (options?: { force?: boolean }) => {\n      const force = options?.force ?? false;\n\n      setBranchesError(null);\n      setStatesError(null);\n      setDropdownsError(null);\n      setLoadingBranches(true);\n      setLoadingStates(true);\n      setLoadingDropdowns(true);\n\n      try {\n        const [branchesRes, statesRes, dropdownsRes] = await Promise.allSettled(\n          [fetchBranches(force), fetchStates(force), fetchDropdowns(force)]\n        );\n\n        const result: {\n          branches: BranchItem[];\n          states: StateItem[];\n          dropdowns: Record<DropdownKey, DropdownItem[]>;\n        } = {\n          branches: branches,\n          states: states,\n          dropdowns: dropdowns,\n        };\n\n        if (branchesRes.status === \"fulfilled\") {\n          result.branches = branchesRes.value;\n        }\n        if (statesRes.status === \"fulfilled\") {\n          result.states = statesRes.value;\n        }\n        if (dropdownsRes.status === \"fulfilled\") {\n          result.dropdowns = dropdownsRes.value;\n        }\n\n        return result;\n      } finally {\n        setLoadingBranches(false);\n        setLoadingStates(false);\n        setLoadingDropdowns(false);\n      }\n    },\n    [fetchBranches, fetchStates, fetchDropdowns, branches, states, dropdowns]\n  );\n\n  return {\n    // Branches\n    branches,\n    loadingBranches,\n    branchesError,\n    fetchBranches,\n\n    // States\n    states,\n    loadingStates,\n    statesError,\n    fetchStates,\n\n    // Dropdowns\n    dropdowns,\n    loadingDropdowns,\n    dropdownsError,\n    fetchDropdowns,\n\n    // Convenience\n    fetchAll,\n  };\n};\n\nexport default useBranchesApi;\n","export interface FieldProps {\n    name: string;\n    label: string;\n    type?: string;\n    placeholder?: string;\n    required?: boolean;\n    autoComplete?: string;\n    validation?: Record<string, any>;\n    isClearable?: boolean;\n    rows?: number;\n    accept?: string;\n    maxSize?: any;\n    isMulti?: any\n}\n\nexport interface FieldSchema {\n    type: string;\n    description: string;\n    component:\n    | \"InputField\"\n    | \"InputSelect\"\n    | \"TextareaField\"\n    | \"InputDate\"\n    | \"InputImage\";\n    props: FieldProps;\n}\n\nexport interface FormSchema {\n    type: string;\n    properties: Record<string, FieldSchema>;\n    required: string[];\n}\n\nconst p3Filter: FormSchema = {\n    type: \"object\",\n    properties: {\n        stockBucket: {\n            type: \"string\",\n            description: \"stockBucket\",\n            component: \"InputSelect\",\n            props: {\n                name: \"stockBucket\",\n                label: \"Stock Bucket\",\n                required: false,\n                isMulti: true,\n                isClearable: true,\n            },\n        },\n        saleBucket: {\n            type: \"string\",\n            description: \"saleBucket\",\n            component: \"InputSelect\",\n            props: {\n                name: \"saleBucket\",\n                label: \"Sales Bucket\",\n                required: false,\n                isMulti: true,\n                isClearable: true,\n            },\n        },\n\n        transitQty: {\n            type: \"string\",\n            description: \"transitQty\",\n            component: \"InputSelect\",\n            props: {\n                name: \"transitQty\",\n                label: \"Transit Qty\",\n                required: false,\n                isMulti: true,\n                isClearable: true,\n            },\n        },\n        localHbtClass: {\n            type: \"string\",\n            description: \"localHbtClass\",\n            component: \"InputSelect\",\n            props: {\n                name: \"localHbtClass\",\n                label: \"Local HBT Class\",\n                required: false,\n                isMulti: true,\n                isClearable: true,\n            },\n        },\n        globalHbtClass: {\n            type: \"string\",\n            description: \"globalHbtClass\",\n            component: \"InputSelect\",\n            props: {\n                name: \"globalHbtClass\",\n                label: \"Global HBT Class\",\n                required: false,\n                isMulti: true,\n                isClearable: true,\n            },\n        },\n        localimport: {\n            type: \"string\",\n            description: \"localimport\",\n            component: \"InputSelect\",\n            props: {\n                name: \"localimport\",\n                label: \"Local Import\",\n                required: false,\n                isMulti: true,\n                isClearable: true,\n            },\n        },\n        states: {\n            type: \"string\",\n            description: \"states\",\n            component: \"InputSelect\",\n            props: {\n                name: \"states\",\n                label: \"State\",\n                required: false,\n                isMulti: true,\n                isClearable: true,\n            },\n        },\n        branches: {\n            type: \"string\",\n            description: \"branches\",\n            component: \"InputSelect\",\n            props: {\n                name: \"branches\",\n                label: \"Branch Name\",\n                required: false,\n                isMulti: true,\n                isClearable: true,\n            },\n        },\n\n    },\n    required: [],\n};\n\nexport default p3Filter;","import { useEffect, useMemo, useCallback } from \"react\";\nimport { useForm, useWatch } from \"react-hook-form\";\nimport useBranchesApi from \"../feature-modules/phase3/api\";\nimport { renderField } from \"../common/utils/renderField\";\nimport { toCsv } from \"../feature-modules/phase3/helperfunc\";\nimport p3Filter from \"../core/json/phsae3Filter\";\n\ninterface FilterValues {\n  branches?: any;\n  states?: any;\n  stockBucket?: any;\n  saleBucket?: any;\n  transitQty?: any;\n  localHbtClass?: any;\n  globalHbtClass?: any;\n  localimport?: any;\n  [k: string]: any;\n}\n\n/* ------------------------------------------------------------------\n   Base defaults – SHOWN BY DEFAULT in badges\n   ------------------------------------------------------------------ */\nconst BASE_DEFAULT_FILTERS: Partial<FilterValues> = {\n  branches: null,\n  states: null,\n  stockBucket: [\n    { value: \"121-150 Days\", label: \"121-150 Days\" },\n    { value: \"151-180 Days\", label: \"151-180 Days\" },\n    { value: \"181-360 Days\", label: \"181-360 Days\" },\n    { value: \"91-120 Days\", label: \"91-120 Days\" },\n    { value: \"360+ Days\", label: \"360+ Days\" },\n  ],\n  saleBucket: [{ value: \"0 Qty\", label: \"0 Qty\" }],\n  transitQty: [{ value: \"0\", label: \"0\" }],\n  localimport: null,\n  localHbtClass: null,\n  globalHbtClass: null,\n};\n\n/* ------------------------------------------------------------------\n   sessionStorage helpers – SKIP empty arrays\n   ------------------------------------------------------------------ */\nconst STORAGE_KEY_PREFIX = \"phase3-filter-\";\n\nconst loadPersisted = (field: keyof FilterValues) => {\n  try {\n    const raw = sessionStorage.getItem(STORAGE_KEY_PREFIX + field);\n    if (!raw) return null;\n    const parsed = JSON.parse(raw);\n    return Array.isArray(parsed) && parsed.length > 0 ? parsed : null;\n  } catch {\n    return null;\n  }\n};\n\nconst savePersisted = (field: keyof FilterValues, value: any) => {\n  try {\n    const isEmpty =\n      value === null ||\n      value === undefined ||\n      (Array.isArray(value) && value.length === 0);\n    const key = STORAGE_KEY_PREFIX + field;\n    if (isEmpty) {\n      sessionStorage.removeItem(key);\n    } else {\n      sessionStorage.setItem(key, JSON.stringify(value));\n    }\n    // notify same-tab listeners to refresh UI\n    try {\n      window.dispatchEvent(new Event(\"phase3-filters-updated\"));\n    } catch {\n      // ignore if dispatch fails in weird environments\n    }\n  } catch {\n    // ignore quota or parse errors\n  }\n};\n\n/* ------------------------------------------------------------------\n   Helper: get all persisted filters\n   ------------------------------------------------------------------ */\nexport const getCurrentFilters = (): Partial<FilterValues> => {\n  const fields: (keyof FilterValues)[] = [\n    \"branches\",\n    \"states\",\n    \"stockBucket\",\n    \"saleBucket\",\n    \"transitQty\",\n    \"localHbtClass\",\n    \"globalHbtClass\",\n    \"localimport\",\n  ];\n  const filters: Partial<FilterValues> = {};\n\n  fields.forEach((field) => {\n    const stored = sessionStorage.getItem(STORAGE_KEY_PREFIX + field);\n    if (stored) {\n      try {\n        filters[field] = JSON.parse(stored);\n      } catch {\n        filters[field] = null;\n      }\n    } else {\n      filters[field] = null;\n    }\n  });\n  return filters;\n};\n\n/* ------------------------------------------------------------------\n   Main Hook – UPDATED TO PERSIST DEFAULTS ON FIRST LOAD\n   ------------------------------------------------------------------ */\nexport const useReportFilters = (\n  extraDefaultValues: Partial<FilterValues> = {}\n) => {\n  const { branches, states, fetchAll, dropdowns } = useBranchesApi();\n\n  /* --------------------------------------------------------------\n       1. Load persisted values + Initialize defaults if missing\n       -------------------------------------------------------------- */\n  const persistedDefaults = useMemo(() => {\n    const fields: (keyof FilterValues)[] = [\n      \"branches\",\n      \"states\",\n      \"stockBucket\",\n      \"saleBucket\",\n      \"transitQty\",\n      \"localHbtClass\",\n      \"globalHbtClass\",\n      \"localimport\",\n    ];\n    const defaults: Partial<FilterValues> = { ...BASE_DEFAULT_FILTERS };\n\n    fields.forEach((f) => {\n      const stored = loadPersisted(f);\n      if (stored !== null) {\n        defaults[f] = stored;\n      } else if (BASE_DEFAULT_FILTERS[f] != null) {\n        // Persist base default if nothing is stored\n        savePersisted(f, BASE_DEFAULT_FILTERS[f]);\n        defaults[f] = BASE_DEFAULT_FILTERS[f];\n      }\n    });\n\n    return defaults;\n  }, []);\n\n  /* --------------------------------------------------------------\n       2. Initialise form\n       -------------------------------------------------------------- */\n  const form = useForm<FilterValues>({\n    mode: \"onBlur\",\n    defaultValues: {\n      ...BASE_DEFAULT_FILTERS,\n      ...persistedDefaults,\n      ...extraDefaultValues,\n    },\n  });\n\n  /* --------------------------------------------------------------\n       3. Fetch dropdowns\n       -------------------------------------------------------------- */\n  useEffect(() => {\n    fetchAll();\n  }, [fetchAll]);\n\n  /* --------------------------------------------------------------\n       4. Sync form → sessionStorage (skip empty)\n       -------------------------------------------------------------- */\n  useEffect(() => {\n    const subscription = form.watch((value, { name }) => {\n      if (!name) return;\n      const field = name as keyof FilterValues;\n      const val = value[field];\n      savePersisted(field, val);\n    });\n    return () => subscription.unsubscribe();\n  }, [form]);\n\n  /* --------------------------------------------------------------\n       5. Watch all form values for live badge updates\n       -------------------------------------------------------------- */\n  const watchedValues =\n    (useWatch({ control: form.control }) as Partial<FilterValues>) || {};\n\n  /* --------------------------------------------------------------\n       6. Select options\n       -------------------------------------------------------------- */\n  const selectOptions = useMemo(\n    () => ({\n      branches,\n      states,\n      stockBucket: dropdowns.Stock_Bucket || [],\n      saleBucket: dropdowns.Sales_Bucket || [],\n      transitQty: dropdowns.Transit_Qty || [],\n      localHbtClass: dropdowns.Local_HBT || [],\n      globalHbtClass: dropdowns.Global_HBT || [],\n      localimport: dropdowns.Local_Import || [],\n    }),\n    [branches, states, dropdowns]\n  );\n\n  /* --------------------------------------------------------------\n       7. Render field wrapper\n       -------------------------------------------------------------- */\n  const renderFieldWrapper = useCallback(\n    (field: any, key: string) =>\n      renderField({\n        field,\n        form,\n        options: field.props?.name\n          ? selectOptions[field.props.name as keyof typeof selectOptions] || []\n          : [],\n        key,\n      }),\n    [form, selectOptions]\n  );\n\n  /* --------------------------------------------------------------\n       8. Payload builder\n       -------------------------------------------------------------- */\n  const buildPayload = useCallback(\n    (data: FilterValues) => ({\n      branchCode: toCsv(data.branches) || \"\",\n      state: toCsv(data.states) || \"\",\n      Local_HBT: toCsv(data.localHbtClass) || \"\",\n      Global_HBT: toCsv(data.globalHbtClass) || \"\",\n      Stock_Bucket: toCsv(data.stockBucket) || \"\",\n      Sales_Bucket: toCsv(data.saleBucket) || \"\",\n      Transit_Qty: toCsv(data.transitQty) || \"\",\n      Local_Import: toCsv(data.localimport) || \"\",\n      ...data,\n    }),\n    []\n  );\n\n  const onSubmit = useCallback(\n    (cb: (payload: any) => void) => (raw: FilterValues) => {\n      const payload = buildPayload(raw);\n      cb(payload);\n    },\n    [buildPayload]\n  );\n\n  /* --------------------------------------------------------------\n       9. Selected Filters Summary – LIVE + PERSISTED + DEFAULTS\n       -------------------------------------------------------------- */\n  const selectedFiltersSummary = useMemo(() => {\n    const summary: { label: string; values: string[] }[] = [];\n\n    const config = [\n      { key: \"branches\", label: \"Branches\", options: branches },\n      { key: \"states\", label: \"States\", options: states },\n      {\n        key: \"stockBucket\",\n        label: \"Stock Bucket\",\n        options: dropdowns.Stock_Bucket || [],\n      },\n      {\n        key: \"saleBucket\",\n        label: \"Sales Bucket\",\n        options: dropdowns.Sales_Bucket || [],\n      },\n      {\n        key: \"transitQty\",\n        label: \"Transit Qty\",\n        options: dropdowns.Transit_Qty || [],\n      },\n      {\n        key: \"localHbtClass\",\n        label: \"Local HBT\",\n        options: dropdowns.Local_HBT || [],\n      },\n      {\n        key: \"globalHbtClass\",\n        label: \"Global HBT\",\n        options: dropdowns.Global_HBT || [],\n      },\n      {\n        key: \"localimport\",\n        label: \"Local Import\",\n        options: dropdowns.Local_Import || [],\n      },\n    ];\n\n    const resolveLabel = (item: any, options: any[]) => {\n      if (item == null) return null;\n      if (typeof item === \"string\" || typeof item === \"number\") {\n        const s = String(item);\n        const opt = options.find(\n          (o: any) => String(o.value) === s || String(o.label) === s\n        );\n        return opt?.label ?? s;\n      }\n      if (typeof item === \"object\") {\n        if (item.label) return item.label;\n        if (item.value) {\n          const s = String(item.value);\n          const opt = options.find(\n            (o: any) => String(o.value) === s || String(o.label) === s\n          );\n          return opt?.label ?? s;\n        }\n        return String(item);\n      }\n      return String(item);\n    };\n\n    config.forEach(({ key, label, options }) => {\n      const rawSelected = (watchedValues as any)?.[key];\n\n      // Prefer live watched value; if empty array/null/undefined, fall back to persisted defaults or base defaults\n      let selected = rawSelected;\n      if (\n        (selected === null ||\n          selected === undefined ||\n          (Array.isArray(selected) && selected.length === 0)) &&\n        (persistedDefaults as any)?.[key]\n      ) {\n        selected = (persistedDefaults as any)[key];\n      }\n      if (\n        (selected === null ||\n          selected === undefined ||\n          (Array.isArray(selected) && selected.length === 0)) &&\n        (BASE_DEFAULT_FILTERS as any)?.[key]\n      ) {\n        selected = (BASE_DEFAULT_FILTERS as any)[key];\n      }\n\n      if (!selected || (Array.isArray(selected) && selected.length === 0))\n        return;\n\n      const labels = Array.isArray(selected)\n        ? selected.map((v: any) => resolveLabel(v, options)).filter(Boolean)\n        : [resolveLabel(selected, options)].filter(Boolean);\n\n      if (labels.length > 0) {\n        summary.push({ label, values: labels });\n      }\n    });\n\n    return summary;\n  }, [watchedValues, branches, states, dropdowns, persistedDefaults]);\n\n  /* --------------------------------------------------------------\n       10. Clear All Filters – Reset to defaults & re-persist\n       -------------------------------------------------------------- */\n  const clearAllFilters = useCallback(() => {\n    // Reset form to base defaults\n    form.reset(BASE_DEFAULT_FILTERS);\n\n    // Clear sessionStorage first\n    Object.keys(BASE_DEFAULT_FILTERS).forEach((field) =>\n      sessionStorage.removeItem(STORAGE_KEY_PREFIX + field)\n    );\n\n    // Re-persist base defaults so they survive refresh\n    Object.entries(BASE_DEFAULT_FILTERS).forEach(([k, v]) => {\n      const key = k as keyof FilterValues;\n      if (v != null && !(Array.isArray(v) && v.length === 0)) {\n        savePersisted(key, v);\n      }\n    });\n\n    window.dispatchEvent(new Event(\"phase3-filters-updated\"));\n  }, [form]);\n\n  /* --------------------------------------------------------------\n       11. Return\n       -------------------------------------------------------------- */\n  return {\n    form,\n    selectOptions,\n    renderFieldWrapper,\n    onSubmit,\n    selectedFiltersSummary,\n    clearAllFilters,\n    ReportFilterRowProps: {\n      properties: p3Filter.properties,\n      renderField: renderFieldWrapper,\n    },\n  } as const;\n};\n\nexport default useReportFilters;\n","\nimport React from 'react';\n\ninterface ReportFilterRowProps {\n    properties: Record<string, any>;\n    renderField: (field: any, key: string) => React.ReactNode;\n    onSubmit?: () => void;\n}\n\nexport const ReportFilterRow: React.FC<ReportFilterRowProps> = ({\n    properties,\n    renderField,\n    onSubmit,\n}) => {\n    const handleClick = (e: React.MouseEvent<HTMLButtonElement>) => {\n        e.preventDefault();\n        onSubmit?.();\n    };\n\n    // const formInput = p3Filter.properties;\n\n    return (\n        <div className=\"row g-3 mb-2\">\n            {Object.entries(properties).map(([key, field]) => (\n                <div key={key} className=\"col-lg-12 col-md-12 col-sm-12\">\n                    {renderField(field, key)}\n                </div>\n            ))}\n\n            {/* ---- Submit button ---- */}\n            <div className=\"col-lg-12 col-md-12 col-sm-12 d-flex align-items-center d-none\">\n                <button\n                    type=\"submit\"\n                    className=\"btn btn-primary w-100 mt-lg-4\"\n                    onClick={handleClick}\n                >\n                    Show Report\n                </button>\n            </div>\n        </div>\n    );\n};","import{useRef as r,useEffect as n,useMemo as t,useState as e,useCallback as u}from\"react\";function c(e,u,c,i){var a=this,o=r(null),f=r(0),l=r(0),v=r(null),m=r([]),d=r(),g=r(),p=r(e),w=r(!0);p.current=e;var s=\"undefined\"!=typeof window,x=!u&&0!==u&&s;if(\"function\"!=typeof e)throw new TypeError(\"Expected a function\");u=+u||0;var h=!!(c=c||{}).leading,y=!(\"trailing\"in c)||!!c.trailing,F=\"maxWait\"in c,A=\"debounceOnServer\"in c&&!!c.debounceOnServer,D=F?Math.max(+c.maxWait||0,u):null;n(function(){return w.current=!0,function(){w.current=!1}},[]);var T=t(function(){var r=function(r){var n=m.current,t=d.current;return m.current=d.current=null,f.current=r,l.current=l.current||r,g.current=p.current.apply(t,n)},n=function(r,n){x&&cancelAnimationFrame(v.current),v.current=x?requestAnimationFrame(r):setTimeout(r,n)},t=function(r){if(!w.current)return!1;var n=r-o.current;return!o.current||n>=u||n<0||F&&r-f.current>=D},e=function(n){return v.current=null,y&&m.current?r(n):(m.current=d.current=null,g.current)},c=function r(){var c=Date.now();if(h&&l.current===f.current&&T(),t(c))return e(c);if(w.current){var i=u-(c-o.current),a=F?Math.min(i,D-(c-f.current)):i;n(r,a)}},T=function(){i&&i({})},W=function(){if(s||A){var e=Date.now(),i=t(e);if(m.current=[].slice.call(arguments),d.current=a,o.current=e,i){if(!v.current&&w.current)return f.current=o.current,n(c,u),h?r(o.current):g.current;if(F)return n(c,u),r(o.current)}return v.current||n(c,u),g.current}};return W.cancel=function(){var r=v.current;r&&(x?cancelAnimationFrame(v.current):clearTimeout(v.current)),f.current=0,m.current=o.current=d.current=v.current=null,r&&i&&i({})},W.isPending=function(){return!!v.current},W.flush=function(){return v.current?e(Date.now()):g.current},W},[h,F,u,D,y,x,s,A,i]);return T}function i(r,n){return r===n}function a(n,t,a){var o=a&&a.equalityFn||i,f=r(n),l=e({})[1],v=c(u(function(r){f.current=r,l({})},[l]),t,a,l),m=r(n);return o(m.current,n)||(v(n),m.current=n),[f.current,v]}function o(r,n,t){var e=void 0===t?{}:t,u=e.leading,i=e.trailing;return c(r,n,{maxWait:n,leading:void 0===u||u,trailing:void 0===i||i})}export{a as useDebounce,c as useDebouncedCallback,o as useThrottledCallback};\n//# sourceMappingURL=index.module.js.map\n","import React, { useCallback, useEffect, useState } from \"react\";\nimport { Settings, ChevronDown, ChevronUp } from \"react-feather\";\nimport { useDispatch } from \"react-redux\";\nimport { Link, useLocation, useParams } from \"react-router-dom\";\nimport ImageWithBasePath from \"../common/component/ImageWithBasePath\";\nimport useFetch from \"../hooks/useFetch\";\nimport { useReportFilters } from \"../hooks/useReportFilters\";\nimport { toCsv } from \"../feature-modules/phase3/helperfunc\";\nimport { ReportFilterRow } from \"../feature-modules/phase3/ReportFilterRow\";\nimport {\n  setBranchSchemeSummaries,\n  setComparisonSummaries,\n  setDepartmentSummaries,\n  setError,\n  setItemSummaries,\n  setLoading,\n  setSummaries,\n} from \"../redux/phase3Slice\";\nimport {\n  fetchFailure,\n  fetchStart,\n  fetchSuccess,\n  clearData,\n} from \"../redux/reportDetailSlice\";\nimport { useDebouncedCallback } from \"use-debounce\";\n// import { RootState } from \"../redux/store\";\n// import { useSelector } from \"react-redux\";\nimport { fetchDashboardData } from \"../redux/dashboardSlice\";\n\n// Define layout and theme types\ntype ThemeMode = \"light_mode\" | \"dark_mode\";\ntype LayoutStyle = \"default\" | \"box\" | \"collapsed\" | \"horizontal\" | \"modern\";\ntype NavColor = \"light\" | \"grey\" | \"dark\";\n\nconst ThemeSettings: React.FC = () => {\n  const dispatch: any = useDispatch();\n  const callFetch = useFetch();\n  const location = useLocation();\n  const { id } = useParams<{ id: string }>();\n  const [show, setShow] = useState<boolean>(false);\n\n  // === SINGLE COLLAPSE STATE: Only one section open at a time ===\n  const [openSection, setOpenSection] = useState<\"filters\" | \"theme\" | null>(\n    null\n  );\n  // const summaries = useSelector((s: RootState) => s.phase3.summaries);\n  // const departmentSummaries = useSelector((s: RootState) => s.phase3.departmentSummaries);\n  // Load from localStorage on mount\n  useEffect(() => {\n    const saved = localStorage.getItem(\"openThemeSection\") as\n      | \"filters\"\n      | \"theme\"\n      | null;\n    setOpenSection(saved ?? \"filters\"); // Default: filters open\n  }, []);\n\n  // Save to localStorage whenever it changes\n  useEffect(() => {\n    if (openSection) {\n      localStorage.setItem(\"openThemeSection\", openSection);\n    } else {\n      localStorage.removeItem(\"openThemeSection\");\n    }\n  }, [openSection]);\n\n  // Toggle function: Ensures only one section is open\n  const toggleSection = (section: \"filters\" | \"theme\") => {\n    setOpenSection((prev) => (prev === section ? null : section));\n  };\n\n  // Theme state\n  const getInitialTheme = (): ThemeMode => {\n    const storedTheme = localStorage.getItem(\"colorschema\") as ThemeMode;\n    if (storedTheme) return storedTheme;\n    const prefersDark = window.matchMedia(\n      \"(prefers-color-scheme: dark)\"\n    ).matches;\n    return prefersDark ? \"dark_mode\" : \"light_mode\";\n  };\n\n  const [layoutColor, setLayoutColor] = useState<ThemeMode>(getInitialTheme());\n  const [layoutView, setLayoutView] = useState<LayoutStyle>(\n    (localStorage.getItem(\"layoutStyling\") as LayoutStyle) || \"default\"\n  );\n  const [layoutTheme, setLayoutTheme] = useState<NavColor>(\n    (localStorage.getItem(\"layoutThemeColors\") as NavColor) || \"light\"\n  );\n\n  const pathname = location.pathname;\n  const basePath = pathname.split(\"/\")[1] || \"\";\n  const selectedDepartment = (location.state as any)?.department ?? \"\";\n  const selectedBranch = (location.state as any)?.branchCode ?? \"\";\n  const itemCode = (location.state as any)?.itemCode ?? \"\";\n  const { enable, bucket } = location?.state ?? {};\n  console.log(\"searching loc\", enable, bucket);\n  // const dep_Item = location.state\n  // console.log(\"dep_Item\", dep_Item)\n\n  // Report Filters Hook\n  const {\n    form,\n    onSubmit: onFilterSubmit,\n    ReportFilterRowProps,\n  } = useReportFilters();\n\n  // Build full payload\n  const buildPayload = useCallback(() => {\n    const values = form.getValues();\n\n    const basePayload = {\n      branchCode: toCsv(values.branches) || \"\",\n      state: toCsv(values.states) || \"\",\n      Local_HBT: toCsv(values.localHbtClass) || \"\",\n      Global_HBT: toCsv(values.globalHbtClass) || \"\",\n      Stock_Bucket: enable === 1 ? bucket : toCsv(values.stockBucket) || \"\",\n      Sales_Bucket: toCsv(values.saleBucket) || \"\",\n      Transit_Qty: toCsv(values.transitQty) || \"\",\n      Local_Import: toCsv(values.localimport) || \"\",\n    };\n    console.log(\"basePayload\", basePayload);\n\n    if (basePath === \"dynamictable\" && id) {\n      return {\n        ...basePayload,\n        department: selectedDepartment || \"\",\n        branchCode: selectedBranch || basePayload.branchCode,\n        itemCode: itemCode || \"\",\n      };\n    }\n\n    return basePayload;\n  }, [form, basePath, id, selectedDepartment, selectedBranch, itemCode]);\n\n  const fetchData = useCallback(\n    async (payload: any) => {\n      dispatch(setLoading(true));\n      dispatch(setError(null));\n\n      // Reset all data\n      dispatch(setSummaries([]));\n      dispatch(setDepartmentSummaries([]));\n      dispatch(setItemSummaries([]));\n      dispatch(setComparisonSummaries([]));\n      dispatch(setBranchSchemeSummaries([]));\n\n      try {\n        // Run all 5 API calls in parallel\n        const [\n          branchRes,\n          deptRes,\n          itemRes,\n          comparisonRes,\n          branchSchemeRes, // New API\n        ] = await Promise.all([\n          callFetch<{ status: string; summaries?: any[] }>(\n            \"hbt-summary\",\n            \"POST\",\n            payload\n          ).catch(() => ({ got: null })),\n          callFetch<any>(\"hbt-summary-department\", \"POST\", payload).catch(\n            () => ({ got: null })\n          ),\n          callFetch<any>(\"hbt-summary-item\", \"POST\", payload).catch(() => ({\n            got: null,\n          })),\n          callFetch<any>(\"hbt-summary-item-schemes\", \"POST\", payload).catch(\n            () => ({ got: null })\n          ),\n          callFetch<any>(\"hbt-summary-branch-schemes\", \"POST\", payload).catch(\n            () => ({ got: null })\n          ),\n        ]);\n\n        // 1. Branch Summary\n        const branches =\n          branchRes.got?.status === \"ok\" ? branchRes.got.summaries || [] : [];\n        dispatch(setSummaries(branches));\n\n        // 2. Department Summary\n        const deptData = deptRes.got;\n        const deptArr = Array.isArray(deptData)\n          ? deptData\n          : deptData?.departments ??\n            deptData?.department_summaries ??\n            (deptData?.status === \"ok\"\n              ? deptData.summaries || deptData.data || []\n              : []);\n        dispatch(setDepartmentSummaries(deptArr));\n\n        // 3. Item Summary (old)\n        const itemData = itemRes.got;\n        const itemArr = Array.isArray(itemData)\n          ? itemData\n          : itemData?.status === \"ok\"\n          ? itemData.summaries || []\n          : [];\n        dispatch(setItemSummaries(itemArr));\n\n        // 4. Item + Scheme Summary\n        const comparisonData = comparisonRes.got;\n        if (\n          comparisonData?.status === \"ok\" &&\n          Array.isArray(comparisonData.summaries)\n        ) {\n          dispatch(setComparisonSummaries(comparisonData.summaries));\n        } else if (comparisonData?.status === \"ok\" && comparisonData.data) {\n          const arr = Array.isArray(comparisonData.data)\n            ? comparisonData.data\n            : [];\n          dispatch(setComparisonSummaries(arr));\n        } else {\n          dispatch(setComparisonSummaries([]));\n        }\n\n        // 5. NEW: Branch + Scheme Summary (hbt-summary-branch-schemes)\n        const branchSchemeData = branchSchemeRes.got;\n        if (branchSchemeData?.status === \"ok\") {\n          const summaries = Array.isArray(branchSchemeData.summaries)\n            ? branchSchemeData.summaries\n            : branchSchemeData.data && Array.isArray(branchSchemeData.data)\n            ? branchSchemeData.data\n            : [];\n          dispatch(setBranchSchemeSummaries(summaries));\n        } else {\n          dispatch(setBranchSchemeSummaries([]));\n        }\n      } catch (e: any) {\n        const msg = e?.message || \"Failed to load data\";\n        dispatch(setError(msg));\n        console.error(\"fetchData error:\", msg, e);\n      } finally {\n        dispatch(setLoading(false));\n      }\n    },\n    [callFetch, dispatch]\n  );\n  // Fetch detail data\n\n  // const fetchDetail = useCallback(\n  //   async (payload: any) => {\n  //     dispatch(clearData());\n  //     dispatch(fetchStart());\n  //     console.log(\"Functions running\");\n  //     try {\n  //       const { got } = await callFetch<any>(\"get-hbtsync-data\", \"POST\", {\n  //         branchCode: selectedBranch || payload.branchCode || \"\",\n  //         department: selectedDepartment || payload.department || \"\",\n  //         itemCode: itemCode || payload.itemCode || \"\",\n  //         ...payload,\n  //       });\n\n  //       let processed: any[] = [];\n\n  //       // Helper: safely parse numeric-like strings to numbers, otherwise return null\n  //       const safeNumber = (v: any) => {\n  //         if (v === null || v === undefined || v === \"\") return null;\n  //         if (typeof v === \"number\") return Number.isFinite(v) ? v : null;\n  //         const s = String(v).replace(/,/g, \"\").trim();\n  //         if (s === \"\") return null;\n  //         const n = Number(s);\n  //         return Number.isFinite(n) ? n : null;\n  //       };\n\n  //       // Canonical mapping: for each canonical key list possible source keys (ordered)\n  //       const FIELD_MAP: Record<string, string[]> = {\n  //         // branch-level\n  //         Branch_Code: [\n  //           \"Branch_Code\",\n  //           \"branchCode\",\n  //           \"branch_code\",\n  //           \"Branch Code\",\n  //         ],\n  //         Branch_Name: [\n  //           \"Branch_Name\",\n  //           \"branchName\",\n  //           \"branch_name\",\n  //           \"Branch Name\",\n  //         ],\n  //         Item_Code: [\"Item_Code\", \"item_code\", \"Item Code\", \"itemCode\"],\n  //         Item_Name: [\n  //           \"Item_Name\",\n  //           \"item_name\",\n  //           \"ItemName\",\n  //           \"itemName\",\n  //           \"itemname\",\n  //         ],\n  //         category: [\n  //           \"category\",\n  //           \"Category\",\n  //           \"item_category\",\n  //           \"item_cat\",\n  //           \"cat\",\n  //         ],\n  //         subcategory: [\n  //           \"subcategory\",\n  //           \"sub_category\",\n  //           \"SubCategory\",\n  //           \"subcat\",\n  //           \"sub_category_name\",\n  //         ],\n  //         description: [\n  //           \"description\",\n  //           \"item_desc\",\n  //           \"item_description\",\n  //           \"Item_Desc\",\n  //           \"desc\",\n  //         ],\n  //         Department: [\n  //           \"Department\",\n  //           \"department\",\n  //           \"item_department\",\n  //           \"Item Department\",\n  //         ],\n  //         item_sub_category: [\n  //           \"item_sub_category\",\n  //           \"sub_category\",\n  //           \"subCategory\",\n  //           \"Item_Sub_Category\",\n  //           \"itemSubCategory\",\n  //         ],\n  //         item_status: [\n  //           \"item_status\",\n  //           \"status\",\n  //           \"Item_Status\",\n  //           \"ItemStatus\",\n  //           \"active_inactive\",\n  //           \"is_active\",\n  //         ],\n  //         exp_imp_sur: [\"exp_imp_sur\", \"expImpSur\", \"exp_imp\", \"exp_imp_surr\"],\n\n  //         // numeric-ish\n  //         Site_Qtys: [\n  //           \"Site_Qtys\",\n  //           \"site_qty\",\n  //           \"site_qtys\",\n  //           \"Site_Qtys\",\n  //           \"total_site_qty\",\n  //         ],\n  //         Total_Sale_Qty: [\n  //           \"Total_Sale_Qty\",\n  //           \"total_sale_qty\",\n  //           \"TotalSaleQty\",\n  //           \"Total Sale Qty\",\n  //         ],\n  //         Total_Sale_Val: [\n  //           \"Total_Sale_Val\",\n  //           \"total_sale_val\",\n  //           \"TotalSaleVal\",\n  //           \"Total Sale Val\",\n  //         ],\n  //         Local_HBT_Class: [\n  //           \"Local_HBT_Class\",\n  //           \"local_hbt_class\",\n  //           \"Local HBT Class\",\n  //         ],\n  //         Global_HBT_Class: [\n  //           \"Global_HBT_Class\",\n  //           \"global_hbt_class\",\n  //           \"Global HBT Class\",\n  //         ],\n  //         Stock_Remarks: [\"Stock_Remarks\", \"stock_remarks\", \"Stock Remarks\"],\n  //         Stock_Days_Diff: [\n  //           \"Stock_Days_Diff\",\n  //           \"stock_days_diff\",\n  //           \"Stock Days Diff\",\n  //         ],\n  //         Stock_Bucket: [\"Stock_Bucket\", \"stock_bucket\", \"Stock Bucket\"],\n  //         Sales_Bucket: [\"Sales_Bucket\", \"sales_bucket\", \"Sales Bucket\"],\n  //         Str_Stk_Sp_Value: [\n  //           \"Str_Stk_Sp_Value\",\n  //           \"str_stk_sp_value\",\n  //           \"Str Stk Sp Value\",\n  //         ],\n  //         Tax_Per_Qty: [\"Tax_Per_Qty\", \"tax_per_qty\", \"Tax Per Qty\"],\n  //         Mrgn_Per_Qty: [\"Mrgn_Per_Qty\", \"mrgn_per_qty\", \"Mrgn Per Qty\"],\n  //         Ttl_Mrgn: [\"Ttl_Mrgn\", \"ttl_mrgn\", \"Ttl Mrgn\", \"Total_Mrgn\"],\n  //         scheme_type: [\"scheme_type\", \"schemeType\", \"Scheme_Type\"],\n  //         scheme_group: [\"scheme_group\", \"schemeGroup\", \"Scheme_Group\"],\n  //         state: [\"state\", \"State\", \"branch_state\", \"branchState\"],\n  //         balance_bin_stock: [\"balance_bin_stock\", \"Balance Bin Stock\"],\n  //         po_qty:[\"po_qty\", \"Po Qty\"]\n  //         // dates / timestamps\n  //         // process_date: [\"process_date\", \"processDate\", \"process date\"],\n  //         // uploaded_on: [\"uploaded_on\", \"uploadedOn\", \"uploaded\"],\n  //         // created_at: [\"created_at\", \"createdAt\"],\n  //         // updated_at: [\"updated_at\", \"updatedAt\"],\n\n  //         // new item metadata\n  //       };\n\n  //       // Helper: pull first present field from object using FIELD_MAP (case-insensitive)\n  //       const extractField = (obj: any, canonical: string): any => {\n  //         const candidates = FIELD_MAP[canonical] ?? [canonical];\n  //         if (!obj) return null;\n  //         for (const k of candidates) {\n  //           if (Object.prototype.hasOwnProperty.call(obj, k)) return obj[k];\n  //         }\n  //         // case-insensitive fallback\n  //         const objKeys = Object.keys(obj);\n  //         for (const k of candidates) {\n  //           const fk = objKeys.find(\n  //             (kk) => kk.toLowerCase() === String(k).toLowerCase()\n  //           );\n  //           if (fk) return obj[fk];\n  //         }\n  //         return null;\n  //       };\n\n  //       // Helper: normalize a single item object\n  //       const normalizeItem = (it: any, parentBranch?: any) => {\n  //         const normalized: Record<string, any> = {\n  //           Item_Code: extractField(it, \"Item_Code\"),\n  //           Item_Name: extractField(it, \"Item_Name\"),\n  //           Department: extractField(it, \"Department\"),\n\n  //           // new metadata\n  //           category: extractField(it, \"category\"),\n  //           subcategory: extractField(it, \"subcategory\"),\n  //           description: extractField(it, \"description\"),\n  //           Branch_Code:\n  //             extractField(it, \"Branch_Code\") ??\n  //             (parentBranch ? extractField(parentBranch, \"Branch_Code\") : null),\n  //           Branch_Name:\n  //             extractField(it, \"Branch_Name\") ??\n  //             (parentBranch ? extractField(parentBranch, \"Branch_Name\") : null),\n  //           state: extractField(it, \"state\"),\n  //           item_status:\n  //             extractField(it, \"item_status\") ?? extractField(it, \"status\"),\n  //           exp_imp_sur: extractField(it, \"exp_imp_sur\"),\n\n  //           // numeric-ish fields coerced where possible\n  //           Site_Qtys: safeNumber(extractField(it, \"Site_Qtys\")),\n  //           Total_Sale_Qty: safeNumber(extractField(it, \"Total_Sale_Qty\")),\n  //           Total_Sale_Val: safeNumber(extractField(it, \"Total_Sale_Val\")),\n  //           Local_HBT_Class: extractField(it, \"Local_HBT_Class\"),\n  //           Global_HBT_Class: extractField(it, \"Global_HBT_Class\"),\n  //           Stock_Remarks: extractField(it, \"Stock_Remarks\"),\n  //           Stock_Days_Diff: safeNumber(extractField(it, \"Stock_Days_Diff\")),\n  //           Stock_Bucket: extractField(it, \"Stock_Bucket\"),\n  //           Sales_Bucket: extractField(it, \"Sales_Bucket\"),\n  //           Str_Stk_Sp_Value: safeNumber(extractField(it, \"Str_Stk_Sp_Value\")),\n  //           Tax_Per_Qty: safeNumber(extractField(it, \"Tax_Per_Qty\")),\n  //           Mrgn_Per_Qty: safeNumber(extractField(it, \"Mrgn_Per_Qty\")),\n  //           Ttl_Mrgn: safeNumber(extractField(it, \"Ttl_Mrgn\")),\n  //           scheme_type: extractField(it, \"scheme_type\"),\n  //           scheme_group: extractField(it, \"scheme_group\"),\n  //           balance_bin_stock: extractField(it, \"balance_bin_stock\"),\n  //           po_qty:extractField(it, \"po_qty\")\n  //         };\n\n  //         return normalized;\n  //       };\n\n  //       // Helper: extract items array robustly from a branch object\n  //       const extractItemsFromBranch = (b: any) => {\n  //         if (!b) return [];\n  //         if (Array.isArray(b.items)) return b.items;\n  //         if (Array.isArray(b.Items)) return b.Items;\n  //         if (Array.isArray(b.ITEMS)) return b.ITEMS;\n  //         if (Array.isArray(b.ItemsList)) return b.ItemsList;\n  //         if (Array.isArray(b.itemsList)) return b.itemsList;\n  //         // some responses use \"Items\" inside root, some use \"items\" — check common wrappers\n  //         if (Array.isArray(b.Items)) return b.Items;\n  //         // fallback: if object itself looks like an item (has Item_Code) return as single-element array\n  //         const hasItemCode =\n  //           b &&\n  //           (b.Item_Code ||\n  //             b.item_code ||\n  //             b.ItemCode ||\n  //             b[\"Item Code\"] ||\n  //             b.itemCode);\n  //         if (hasItemCode) return [b];\n  //         return [];\n  //       };\n\n  //       // Normalize depending on response shape (branched vs flat)\n  //       if (id === \"2\") {\n  //         // branched response expected: normalize branches, flatten items\n  //         const branches = Array.isArray(got)\n  //           ? got\n  //           : got?.departments ??\n  //             got?.summaries ??\n  //             got?.branches ??\n  //             (got?.items\n  //               ? Array.isArray(got.items)\n  //                 ? got.items\n  //                 : [got]\n  //               : []);\n\n  //         const items = (branches || []).flatMap((b: any) => {\n  //           const rawItems = extractItemsFromBranch(b);\n  //           return rawItems.map((it: any) => normalizeItem(it, b));\n  //         });\n\n  //         processed = itemCode\n  //           ? items.filter((it: any) =>\n  //               String(it.Item_Code ?? \"\")\n  //                 .toLowerCase()\n  //                 .includes(String(itemCode).toLowerCase())\n  //             )\n  //           : items;\n  //       } else {\n  //         // non-branch flow: expect array of items or wrapper shapes\n  //         const rawItems = Array.isArray(got)\n  //           ? got\n  //           : got?.departments ??\n  //             got?.department_summaries ??\n  //             (got?.status === \"ok\" ? got.summaries : []) ??\n  //             got?.items ??\n  //             [];\n\n  //         const arr = Array.isArray(rawItems) ? rawItems : [];\n  //         processed = arr.map((it: any) => normalizeItem(it));\n  //       }\n\n  //       // dispatch normalized data\n  //       dispatch(fetchSuccess(processed));\n  //     } catch (e: any) {\n  //       dispatch(fetchFailure(e?.message ?? \"Failed to load detail data\"));\n  //     }\n  //   },\n  //   [callFetch, dispatch, id, selectedBranch, selectedDepartment, itemCode]\n  // );\n\n//   const fetchDetail = useCallback(\n//   async (payload: any) => {\n//     dispatch(clearData());\n//     dispatch(fetchStart());\n//     console.log(\"Functions running\");\n//     try {\n//       const { got } = await callFetch<any>(\"get-hbtsync-data\", \"POST\", {\n//         branchCode: selectedBranch || payload.branchCode || \"\",\n//         department: selectedDepartment || payload.department || \"\",\n//         itemCode: itemCode || payload.itemCode || \"\",\n//         ...payload,\n//       });\n\n//       let processed: any[] = [];\n\n//       // Helper: safely parse numeric-like strings to numbers, otherwise return null\n//       const safeNumber = (v: any) => {\n//         if (v === null || v === undefined || v === \"\") return null;\n//         if (typeof v === \"number\") return Number.isFinite(v) ? v : null;\n//         const s = String(v).replace(/,/g, \"\").trim();\n//         if (s === \"\") return null;\n//         const n = Number(s);\n//         return Number.isFinite(n) ? n : null;\n//       };\n\n//       // Canonical mapping: for each canonical key list possible source keys (ordered)\n//       const FIELD_MAP: Record<string, string[]> = {\n//         // branch-level\n//         Branch_Code: [\"Branch_Code\", \"branchCode\", \"branch_code\", \"Branch Code\"],\n//         Branch_Name: [\"Branch_Name\", \"branchName\", \"branch_name\", \"Branch Name\"],\n//         Item_Code: [\"Item_Code\", \"item_code\", \"Item Code\", \"itemCode\"],\n//         Item_Name: [\"Item_Name\", \"item_name\", \"ItemName\", \"itemName\", \"itemname\"],\n//         category: [\"category\", \"Category\", \"item_category\", \"item_cat\", \"cat\"],\n//         subcategory: [\n//           \"subcategory\",\n//           \"sub_category\",\n//           \"SubCategory\",\n//           \"subcat\",\n//           \"sub_category_name\",\n//         ],\n//         description: [\"description\", \"item_desc\", \"item_description\", \"Item_Desc\", \"desc\"],\n//         Department: [\"Department\", \"department\", \"item_department\", \"Item Department\"],\n//         item_sub_category: [\n//           \"item_sub_category\",\n//           \"sub_category\",\n//           \"subCategory\",\n//           \"Item_Sub_Category\",\n//           \"itemSubCategory\",\n//         ],\n//         item_status: [\n//           \"item_status\",\n//           \"status\",\n//           \"Item_Status\",\n//           \"ItemStatus\",\n//           \"active_inactive\",\n//           \"is_active\",\n//         ],\n//         exp_imp_sur: [\"exp_imp_sur\", \"expImpSur\", \"exp_imp\", \"exp_imp_surr\"],\n\n//         // numeric-ish\n//         Site_Qtys: [\"Site_Qtys\", \"site_qty\", \"site_qtys\", \"Site_Qtys\", \"total_site_qty\"],\n//         Total_Sale_Qty: [\"Total_Sale_Qty\", \"total_sale_qty\", \"TotalSaleQty\", \"Total Sale Qty\"],\n//         Total_Sale_Val: [\"Total_Sale_Val\", \"total_sale_val\", \"TotalSaleVal\", \"Total Sale Val\"],\n//         Local_HBT_Class: [\"Local_HBT_Class\", \"local_hbt_class\", \"Local HBT Class\"],\n//         Global_HBT_Class: [\"Global_HBT_Class\", \"global_hbt_class\", \"Global HBT Class\"],\n//         Stock_Remarks: [\"Stock_Remarks\", \"stock_remarks\", \"Stock Remarks\"],\n//         Stock_Days_Diff: [\"Stock_Days_Diff\", \"stock_days_diff\", \"Stock Days Diff\"],\n//         Stock_Bucket: [\"Stock_Bucket\", \"stock_bucket\", \"Stock Bucket\"],\n//         Sales_Bucket: [\"Sales_Bucket\", \"sales_bucket\", \"Sales Bucket\"],\n//         Str_Stk_Sp_Value: [\"Str_Stk_Sp_Value\", \"str_stk_sp_value\", \"Str Stk Sp Value\"],\n//         Tax_Per_Qty: [\"Tax_Per_Qty\", \"tax_per_qty\", \"Tax Per Qty\"],\n//         Mrgn_Per_Qty: [\"Mrgn_Per_Qty\", \"mrgn_per_qty\", \"Mrgn Per Qty\"],\n//         Ttl_Mrgn: [\"Ttl_Mrgn\", \"ttl_mrgn\", \"Ttl Mrgn\", \"Total_Mrgn\"],\n//         scheme_type: [\"scheme_type\", \"schemeType\", \"Scheme_Type\"],\n//         scheme_group: [\"scheme_group\", \"schemeGroup\", \"Scheme_Group\"],\n//         state: [\"state\", \"State\", \"branch_state\", \"branchState\"],\n//         balance_bin_stock: [\"balance_bin_stock\", \"Balance Bin Stock\", \"balanceBinStock\"],\n//         po_qty: [\"po_qty\", \"Po Qty\", \"poQty\"],\n//       };\n\n//       // Helper: pull first present field from object using FIELD_MAP (case-insensitive)\n//       const extractField = (obj: any, canonical: string): any => {\n//         const candidates = FIELD_MAP[canonical] ?? [canonical];\n//         if (!obj) return null;\n//         for (const k of candidates) {\n//           if (Object.prototype.hasOwnProperty.call(obj, k)) return obj[k];\n//         }\n//         // case-insensitive fallback\n//         const objKeys = Object.keys(obj);\n//         for (const k of candidates) {\n//           const fk = objKeys.find((kk) => kk.toLowerCase() === String(k).toLowerCase());\n//           if (fk) return obj[fk];\n//         }\n//         return null;\n//       };\n\n//       // Helper: normalize a single item object\n//       const normalizeItem = (it: any, parentBranch?: any) => {\n//         const normalized: Record<string, any> = {\n//           Item_Code: extractField(it, \"Item_Code\"),\n//           Item_Name: extractField(it, \"Item_Name\"),\n//           Department: extractField(it, \"Department\"),\n\n//           // new metadata\n//           category: extractField(it, \"category\"),\n//           subcategory: extractField(it, \"subcategory\"),\n//           description: extractField(it, \"description\"),\n//           Branch_Code:\n//             extractField(it, \"Branch_Code\") ??\n//             (parentBranch ? extractField(parentBranch, \"Branch_Code\") : null),\n//           Branch_Name:\n//             extractField(it, \"Branch_Name\") ??\n//             (parentBranch ? extractField(parentBranch, \"Branch_Name\") : null),\n//           state: extractField(it, \"state\"),\n//           item_status: extractField(it, \"item_status\") ?? extractField(it, \"status\"),\n//           exp_imp_sur: extractField(it, \"exp_imp_sur\"),\n\n//           // numeric-ish fields coerced where possible\n//           Site_Qtys: safeNumber(extractField(it, \"Site_Qtys\")),\n//           Total_Sale_Qty: safeNumber(extractField(it, \"Total_Sale_Qty\")),\n//           Total_Sale_Val: safeNumber(extractField(it, \"Total_Sale_Val\")),\n//           Local_HBT_Class: extractField(it, \"Local_HBT_Class\"),\n//           Global_HBT_Class: extractField(it, \"Global_HBT_Class\"),\n//           Stock_Remarks: extractField(it, \"Stock_Remarks\"),\n//           Stock_Days_Diff: safeNumber(extractField(it, \"Stock_Days_Diff\")),\n//           Stock_Bucket: extractField(it, \"Stock_Bucket\"),\n//           Sales_Bucket: extractField(it, \"Sales_Bucket\"),\n//           Str_Stk_Sp_Value: safeNumber(extractField(it, \"Str_Stk_Sp_Value\")),\n//           Tax_Per_Qty: safeNumber(extractField(it, \"Tax_Per_Qty\")),\n//           Mrgn_Per_Qty: safeNumber(extractField(it, \"Mrgn_Per_Qty\")),\n//           Ttl_Mrgn: safeNumber(extractField(it, \"Ttl_Mrgn\")),\n//           scheme_type: extractField(it, \"scheme_type\"),\n//           scheme_group: extractField(it, \"scheme_group\"),\n//           balance_bin_stock: safeNumber(extractField(it, \"balance_bin_stock\")),\n//           po_qty: safeNumber(extractField(it, \"po_qty\")),\n//         };\n\n//         return normalized;\n//       };\n\n//       // Helper: extract items array robustly from a branch object\n//       const extractItemsFromBranch = (b: any) => {\n//         if (!b) return [];\n//         if (Array.isArray(b.items)) return b.items;\n//         if (Array.isArray(b.Items)) return b.Items;\n//         if (Array.isArray(b.ITEMS)) return b.ITEMS;\n//         if (Array.isArray(b.ItemsList)) return b.ItemsList;\n//         if (Array.isArray(b.itemsList)) return b.itemsList;\n//         // fallback: if object itself looks like an item (has Item_Code) return as single-element array\n//         const hasItemCode =\n//           b &&\n//           (b.Item_Code ||\n//             b.item_code ||\n//             b.ItemCode ||\n//             b[\"Item Code\"] ||\n//             b.itemCode);\n//         if (hasItemCode) return [b];\n//         return [];\n//       };\n\n//       // parseCodes: normalize selected item code(s) from state or payload into array of lower-trimmed codes\n//       const parseCodes = (raw: any): string[] => {\n//         if (raw == null) return [];\n//         if (Array.isArray(raw)) {\n//           return raw\n//             .map((x) => (x == null ? \"\" : String(x).trim()))\n//             .filter((s) => s !== \"\")\n//             .map((s) => s.toLowerCase());\n//         }\n//         // string path: accept comma-separated or single value\n//         const asStr = String(raw);\n//         const parts = asStr.split(\",\").map((p) => p.trim()).filter((p) => p !== \"\");\n//         return parts.map((p) => p.toLowerCase());\n//       };\n\n//       // determine filter codes from: (itemCode state) || (payload.itemCode) || none\n//       const filterCodes =\n//         parseCodes(itemCode ?? payload?.itemCode ?? got?.applied_itemCode ?? null);\n\n//       // Normalize depending on response shape (branched vs flat)\n//       if (id === \"2\") {\n//         // branched response expected: normalize branches, flatten items\n//         const branches = Array.isArray(got)\n//           ? got\n//           : got?.departments ??\n//             got?.summaries ??\n//             got?.branches ??\n//             (got?.items ? (Array.isArray(got.items) ? got.items : [got]) : []);\n\n//         const items = (branches || []).flatMap((b: any) => {\n//           const rawItems = extractItemsFromBranch(b);\n//           return rawItems.map((it: any) => normalizeItem(it, b));\n//         });\n\n//         processed =\n//           filterCodes.length > 0\n//             ? items.filter((it: any) => {\n//                 const code = String(it.Item_Code ?? \"\").toLowerCase().trim();\n//                 return filterCodes.includes(code);\n//               })\n//             : items;\n//       } else {\n//         // non-branch flow: expect array of items or wrapper shapes\n//         const rawItems = Array.isArray(got)\n//           ? got\n//           : got?.departments ??\n//             got?.department_summaries ??\n//             (got?.status === \"ok\" ? got.summaries : []) ??\n//             got?.items ??\n//             [];\n\n//         const arr = Array.isArray(rawItems) ? rawItems : [];\n//         const normalized = arr.map((it: any) => normalizeItem(it));\n//         processed =\n//           filterCodes.length > 0\n//             ? normalized.filter((it: any) => {\n//                 const code = String(it.Item_Code ?? \"\").toLowerCase().trim();\n//                 return filterCodes.includes(code);\n//               })\n//             : normalized;\n//       }\n\n//       // dispatch normalized data\n//       dispatch(fetchSuccess(processed));\n//     } catch (e: any) {\n//       dispatch(fetchFailure(e?.message ?? \"Failed to load detail data\"));\n//     }\n//   },\n//   [callFetch, dispatch, id, selectedBranch, selectedDepartment, itemCode]\n// );\n\nconst fetchDetail = useCallback(\n  async (payload: any) => {\n    dispatch(clearData());\n    dispatch(fetchStart());\n    console.log(\"Functions running\");\n\n    try {\n      const { got } = await callFetch<any>(\"get-hbtsync-data\", \"POST\", {\n        branchCode: selectedBranch || payload.branchCode || \"\",\n        department: selectedDepartment || payload.department || \"\",\n        itemCode: itemCode || payload.itemCode || \"\",\n        ...payload,\n      });\n\n      let processed: any[] = [];\n\n      // ──────────────────────────────────────────────────────────────\n      // Helper utilities (same as before)\n      // ──────────────────────────────────────────────────────────────\n      const safeNumber = (v: any) => {\n        if (v === null || v === undefined || v === \"\") return null;\n        if (typeof v === \"number\") return Number.isFinite(v) ? v : null;\n        const s = String(v).replace(/,/g, \"\").trim();\n        if (s === \"\") return null;\n        const n = Number(s);\n        return Number.isFinite(n) ? n : null;\n      };\n\n      const FIELD_MAP: Record<string, string[]> = { /* ... your full map ... */ };\n\n      const extractField = (obj: any, canonical: string): any => {\n        const candidates = FIELD_MAP[canonical] ?? [canonical];\n        if (!obj) return null;\n        for (const k of candidates) {\n          if (Object.prototype.hasOwnProperty.call(obj, k)) return obj[k];\n        }\n        const lower = canonical.toLowerCase();\n        for (const k of Object.keys(obj)) {\n          if (k.toLowerCase() === lower) return obj[k];\n        }\n        return null;\n      };\n\n      const normalizeItem = (it: any, parentBranch?: any) => {\n        const normalized: Record<string, any> = {\n          Item_Code: extractField(it, \"Item_Code\"),\n          Item_Name: extractField(it, \"Item_Name\"),\n          Department: extractField(it, \"Department\"),\n\n          category: extractField(it, \"category\"),\n          subcategory: extractField(it, \"subcategory\"),\n          description: extractField(it, \"description\"),\n          Branch_Code:\n            extractField(it, \"Branch_Code\") ??\n            (parentBranch ? extractField(parentBranch, \"Branch_Code\") : null),\n          Branch_Name:\n            extractField(it, \"Branch_Name\") ??\n            (parentBranch ? extractField(parentBranch, \"Branch_Name\") : null),\n          state: extractField(it, \"state\"),\n          item_status: extractField(it, \"item_status\") ?? extractField(it, \"status\"),\n          exp_imp_sur: extractField(it, \"exp_imp_sur\"),\n\n          Site_Qtys: safeNumber(extractField(it, \"Site_Qtys\")),\n          Total_Sale_Qty: safeNumber(extractField(it, \"Total_Sale_Qty\")),\n          Total_Sale_Val: safeNumber(extractField(it, \"Total_Sale_Val\")),\n          Local_HBT_Class: extractField(it, \"Local_HBT_Class\"),\n          Global_HBT_Class: extractField(it, \"Global_HBT_Class\"),\n          Stock_Remarks: extractField(it, \"Stock_Remarks\"),\n          Stock_Days_Diff: safeNumber(extractField(it, \"Stock_Days_Diff\")),\n          Stock_Bucket: extractField(it, \"Stock_Bucket\"),\n          Sales_Bucket: extractField(it, \"Sales_Bucket\"),\n          Str_Stk_Sp_Value: safeNumber(extractField(it, \"Str_Stk_Sp_Value\")),\n          Tax_Per_Qty: safeNumber(extractField(it, \"Tax_Per_Qty\")),\n          Mrgn_Per_Qty: safeNumber(extractField(it, \"Mrgn_Per_Qty\")),\n          Ttl_Mrgn: safeNumber(extractField(it, \"Ttl_Mrgn\")),\n          scheme_type: extractField(it, \"scheme_type\"),\n          scheme_group: extractField(it, \"scheme_group\"),\n          balance_bin_stock: safeNumber(extractField(it, \"balance_bin_stock\")),\n          po_qty: safeNumber(extractField(it, \"po_qty\")),\n        };\n\n        return normalized;\n      };\n\n      const extractItemsFromBranch = (b: any) => {\n        if (!b) return [];\n        if (Array.isArray(b.items)) return b.items;\n        if (Array.isArray(b.Items)) return b.Items;\n        if (Array.isArray(b.ITEMS)) return b.ITEMS;\n        if (Array.isArray(b.ItemsList)) return b.ItemsList;\n        if (Array.isArray(b.itemsList)) return b.itemsList;\n        const hasItemCode = b && (\n          b.Item_Code || b.item_code || b.ItemCode || b[\"Item Code\"] || b.itemCode\n        );\n        return hasItemCode ? [b] : [];\n      };\n\n      const parseCodes = (raw: any): string[] => {\n        if (!raw) return [];\n        if (Array.isArray(raw)) {\n          return raw\n            .map((x) => String(x ?? \"\").trim())\n            .filter(Boolean)\n            .map((s) => s.toLowerCase());\n        }\n        return String(raw)\n          .split(\",\")\n          .map((s) => s.trim())\n          .filter(Boolean)\n          .map((s) => s.toLowerCase());\n      };\n\n      const filterCodes = parseCodes(\n        itemCode ?? payload?.itemCode ?? got?.applied_itemCode ?? null\n      );\n\n      // ──────────────────────────────────────────────────────────────\n      // Unified handling – both id === \"1\" and id === \"2\" now use the\n      // exact same branched → flatten → normalize → filter logic\n      // ──────────────────────────────────────────────────────────────\n      const isBranchedFlow = id === \"1\" || id === \"2\";\n\n      if (isBranchedFlow) {\n        // Expected shape: array of branches OR wrapper with .branches/.departments/.summaries etc.\n        const branches = Array.isArray(got)\n          ? got\n          : got?.branches ??\n            got?.departments ??\n            got?.summaries ??\n            got?.items ??\n            (Array.isArray(got.items) ? got.items : []);\n\n        const allItems = (branches || []).flatMap((branch: any) => {\n          const rawItems = extractItemsFromBranch(branch);\n          return rawItems.map((item: any) => normalizeItem(item, branch));\n        });\n\n        processed = filterCodes.length > 0\n          ? allItems.filter((it: any) =>\n              filterCodes.includes(String(it.Item_Code ?? \"\").trim().toLowerCase())\n            )\n          : allItems;\n      } else {\n        // Fallback flat flow (kept for any other id values)\n        const rawItems = Array.isArray(got)\n          ? got\n          : got?.departments ??\n            got?.department_summaries ??\n            got?.items ??\n            got?.summaries ??\n            [];\n\n        const arr = Array.isArray(rawItems) ? rawItems : [];\n        const normalized = arr.map((it: any) => normalizeItem(it));\n\n        processed = filterCodes.length > 0\n          ? normalized.filter((it: any) =>\n              filterCodes.includes(String(it.Item_Code ?? \"\").trim().toLowerCase())\n            )\n          : normalized;\n      }\n\n      dispatch(fetchSuccess(processed));\n    } catch (e: any) {\n      dispatch(fetchFailure(e?.message ?? \"Failed to load detail data\"));\n    }\n  },\n  [\n    callFetch,\n    dispatch,\n    id,\n    selectedBranch,\n    selectedDepartment,\n    itemCode,\n  ]\n);\n\n  // Unified fetch trigger\n  const triggerFetch = useCallback(() => {\n    const payload = buildPayload();\n    if (basePath === \"dynamictable\") {\n      fetchDetail(payload);\n    } else if (basePath === \"summaries\") {\n      fetchData(payload);\n      // console.log(\"hsahs\");\n    } else if (basePath === \"\") {\n      dispatch(fetchDashboardData(payload));\n      fetchData(payload);\n    }\n  }, [basePath, buildPayload, fetchData, fetchDetail]);\n\n  const debouncedTriggerFetch = useDebouncedCallback(triggerFetch, 500);\n\n  // Initial fetch + re-fetch on route/filter changes\n  useEffect(() => {\n    debouncedTriggerFetch();\n  }, [debouncedTriggerFetch, basePath, id]);\n\n  // Handle filter submit\n  const handleFilterSubmit = form.handleSubmit((values) => {\n    (onFilterSubmit as any)(values);\n    console.log(\"vvvvvvv\",values)\n      debouncedTriggerFetch();\n      // console.log(\"Else\")\n    \n  });\n\n  // Apply theme\n  useEffect(() => {\n    document.documentElement.setAttribute(\"data-layout-mode\", layoutColor);\n    document.documentElement.setAttribute(\"data-layout-style\", layoutView);\n    document.documentElement.setAttribute(\"data-nav-color\", layoutTheme);\n    localStorage.setItem(\"colorschema\", layoutColor);\n  }, [layoutColor, layoutView, layoutTheme]);\n\n  const applyTheme = (theme: ThemeMode, userOverride = false) => {\n    setLayoutColor(theme);\n    localStorage.setItem(\"colorschema\", theme);\n    if (userOverride) localStorage.setItem(\"userThemeOverride\", \"true\");\n    dispatch({ type: \"SET_THEME\", payload: theme });\n    document.documentElement.setAttribute(\"data-layout-mode\", theme);\n  };\n\n  // System theme sync\n  useEffect(() => {\n    const mediaQuery = window.matchMedia(\"(prefers-color-scheme: dark)\");\n    const handleChange = (e: MediaQueryListEvent) => {\n      if (!localStorage.getItem(\"userThemeOverride\")) {\n        applyTheme(e.matches ? \"dark_mode\" : \"light_mode\");\n      }\n    };\n    if (!localStorage.getItem(\"userThemeOverride\")) {\n      const initial = mediaQuery.matches ? \"dark_mode\" : \"light_mode\";\n      if (layoutColor !== initial) applyTheme(initial);\n    }\n    mediaQuery.addEventListener(\"change\", handleChange);\n    return () => mediaQuery.removeEventListener(\"change\", handleChange);\n  }, [layoutColor]);\n\n  const showSettings = (e: React.MouseEvent) => {\n    e.preventDefault();\n    setShow((prev) => !prev);\n  };\n\n  const darkThemes = () => applyTheme(\"dark_mode\", true);\n  const lightThemes = () => applyTheme(\"light_mode\", true);\n\n  // const layoutGrey = () => {\n  //   localStorage.setItem(\"layoutThemeColors\", \"grey\");\n  //   setLayoutTheme(\"grey\");\n  // };\n  // const layoutDark = () => {\n  //   localStorage.setItem(\"layoutThemeColors\", \"dark\");\n  //   setLayoutTheme(\"dark\");\n  // };\n  // const layoutLight = () => {\n  //   localStorage.setItem(\"layoutThemeColors\", \"light\");\n  //   setLayoutTheme(\"light\");\n  // };\n\n  const resetData = (e: React.MouseEvent) => {\n    e.preventDefault();\n    localStorage.removeItem(\"colorschema\");\n    localStorage.removeItem(\"layoutStyling\");\n    localStorage.removeItem(\"layoutThemeColors\");\n    localStorage.removeItem(\"userThemeOverride\");\n    localStorage.removeItem(\"openThemeSection\");\n\n    const mediaQuery = window.matchMedia(\"(prefers-color-scheme: dark)\");\n    const initialTheme = mediaQuery.matches ? \"dark_mode\" : \"light_mode\";\n\n    setLayoutColor(initialTheme);\n    setLayoutView(\"default\");\n    setLayoutTheme(\"light\");\n    applyTheme(initialTheme);\n    document.documentElement.setAttribute(\"data-layout-style\", \"default\");\n    document.documentElement.setAttribute(\"data-nav-color\", \"light\");\n    setOpenSection(\"filters\");\n  };\n\n  return (\n    <>\n      {/* Theme Toggle Button */}\n      <div className=\"customizer-links\" id=\"setdata\">\n        <ul className=\"sticky-sidebar\">\n          <li className=\"sidebar-icons\" onClick={showSettings}>\n            <Link\n              to=\"#\"\n              onClick={(e) => e.preventDefault()}\n              className=\"navigation-add\"\n              data-bs-toggle=\"tooltip\"\n              data-bs-placement=\"left\"\n              title=\"Theme & Filters\"\n            >\n              <Settings className=\"feather-five\" />\n            </Link>\n          </li>\n        </ul>\n      </div>\n\n      {/* Theme Settings Panel */}\n      <div\n        className={`sidebar-settings nav-toggle ${show ? \"show-settings\" : \"\"}`}\n        id=\"layoutDiv\"\n      >\n        <div className=\"sidebar-content sticky-sidebar-one\">\n          <div className=\"sidebar-header\">\n            <div className=\"sidebar-theme-title\">\n              <h5>Theme & Filters</h5>\n              <p>Customize theme and apply report filters</p>\n            </div>\n            <div className=\"close-sidebar-icon d-flex\">\n              <Link\n                to=\"#\"\n                className=\"sidebar-refresh me-2\"\n                onClick={resetData}\n                title=\"Reset\"\n              >\n                ⟳\n              </Link>\n              <Link\n                className=\"sidebar-close\"\n                to=\"#\"\n                onClick={(e) => {\n                  e.preventDefault();\n                  setShow(false);\n                }}\n              >\n                X\n              </Link>\n            </div>\n          </div>\n\n          <div className=\"sidebar-body p-0\">\n            <form>\n              {/* === FILTERS SECTION === */}\n              <div className=\"theme-mode mb-3\">\n                <div\n                  className=\"theme-head d-flex justify-content-between align-items-center cursor-pointer p-3 border-bottom\"\n                  onClick={() => toggleSection(\"filters\")}\n                >\n                  <div>\n                    <h6>Report Filters</h6>\n                    <p className=\"mb-0\">Filter data across all reports</p>\n                  </div>\n                  {openSection === \"filters\" ? (\n                    <ChevronUp size={18} />\n                  ) : (\n                    <ChevronDown size={18} />\n                  )}\n                </div>\n\n                {openSection === \"filters\" && (\n                  <div className=\"p-3 border-bottom\">\n                    <ReportFilterRow\n                      {...ReportFilterRowProps}\n                      onSubmit={handleFilterSubmit}\n                    />\n                  </div>\n                )}\n              </div>\n\n              {/* === THEME SECTION === */}\n              <div className=\"theme-mode mb-0\">\n                <div\n                  className=\"theme-head d-flex justify-content-between align-items-center cursor-pointer p-3 border-bottom\"\n                  onClick={() => toggleSection(\"theme\")}\n                >\n                  <div>\n                    <h6>Theme Settings</h6>\n                    <p className=\"mb-0\">\n                      Light & Dark modes, navigation colors\n                    </p>\n                  </div>\n                  {openSection === \"theme\" ? (\n                    <ChevronUp size={18} />\n                  ) : (\n                    <ChevronDown size={18} />\n                  )}\n                </div>\n\n                {openSection === \"theme\" && (\n                  <div className=\"p-3\">\n                    {/* Light / Dark Mode */}\n                    <div className=\"row mb-3\">\n                      <div className=\"col-xl-6\">\n                        <div className=\"layout-wrap\">\n                          <div className=\"d-flex align-items-center\">\n                            <div\n                              className=\"status-toggle d-flex align-items-center me-2\"\n                              onClick={lightThemes}\n                            >\n                              <input\n                                type=\"radio\"\n                                name=\"theme-mode\"\n                                id=\"light_mode\"\n                                className=\"check\"\n                                checked={layoutColor === \"light_mode\"}\n                                onChange={lightThemes}\n                              />\n                              <label\n                                htmlFor=\"light_mode\"\n                                className=\"checktoggles\"\n                              >\n                                <ImageWithBasePath\n                                  src=\"assets/light.png\"\n                                  alt=\"Light\"\n                                />\n                                <span className=\"theme-name\">Light Mode</span>\n                              </label>\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                      <div className=\"col-xl-6\">\n                        <div className=\"layout-wrap\">\n                          <div className=\"d-flex align-items-center\">\n                            <div\n                              className=\"status-toggle d-flex align-items-center me-2\"\n                              onClick={darkThemes}\n                            >\n                              <input\n                                type=\"radio\"\n                                name=\"theme-mode\"\n                                id=\"dark_mode\"\n                                className=\"check\"\n                                checked={layoutColor === \"dark_mode\"}\n                                onChange={darkThemes}\n                              />\n                              <label\n                                htmlFor=\"dark_mode\"\n                                className=\"checktoggles\"\n                              >\n                                <ImageWithBasePath\n                                  src=\"assets/dark.png\"\n                                  alt=\"Dark\"\n                                />\n                                <span className=\"theme-name\">Dark Mode</span>\n                              </label>\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                )}\n              </div>\n            </form>\n\n            {/* Footer */}\n            <div className=\"sidebar-footer p-3\">\n              <div className=\"row g-2\">\n                <div className=\"col-6\">\n                  <button\n                    type=\"button\"\n                    className=\"btn btn-primary w-100 d-flex align-items-center justify-content-center gap-2\"\n                    onClick={triggerFetch}\n                    data-bs-toggle=\"tooltip\"\n                    data-bs-placement=\"top\"\n                    title=\"Apply filters and reload reports\"\n                  >\n                    <Settings size={16} />\n                    Show Reports\n                  </button>\n                </div>\n                <div className=\"col-6\">\n                  <button\n                    type=\"button\"\n                    className=\"btn btn-secondary w-100\"\n                    onClick={resetData}\n                  >\n                    Reset to System Default\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default ThemeSettings;\n"],"names":["_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","indexOf","propertyIsEnumerable","sourceKeys","keys","ChevronDown","forwardRef","_ref","ref","_ref$color","color","_ref$size","size","rest","React","createElement","xmlns","width","height","viewBox","fill","stroke","strokeWidth","strokeLinecap","strokeLinejoin","points","propTypes","PropTypes","string","oneOfType","number","displayName","ChevronUp","Settings","cx","cy","r","d","useBranchesApi","callFetch","useFetch","branches","setBranches","useState","loadingBranches","setLoadingBranches","branchesError","setBranchesError","states","setStates","loadingStates","setLoadingStates","statesError","setStatesError","dropdowns","setDropdowns","Global_HBT","Local_HBT","Sales_Bucket","Stock_Bucket","Transit_Qty","Local_Import","loadingDropdowns","setLoadingDropdowns","dropdownsError","setDropdownsError","fetchBranches","useCallback","async","force","result","payload","got","status","message","data","Array","isArray","mapped","filter","b","value","label","map","String","err","console","error","fetchStates","stateFilter","url","encodeURIComponent","s","fetchDropdowns","isCached","values","some","arr","validDropdowns","entries","forEach","items","dropdownKey","filteredItems","item","trim","excludeLabels","includes","log","fetchAll","options","branchesRes","statesRes","dropdownsRes","Promise","allSettled","p3Filter","properties","stockBucket","type","description","component","props","name","required","isMulti","isClearable","saleBucket","transitQty","localHbtClass","globalHbtClass","localimport","BASE_DEFAULT_FILTERS","STORAGE_KEY_PREFIX","loadPersisted","field","raw","sessionStorage","getItem","parsed","JSON","parse","savePersisted","isEmpty","removeItem","setItem","stringify","window","dispatchEvent","Event","useReportFilters","extraDefaultValues","persistedDefaults","useMemo","fields","defaults","f","stored","form","useForm","mode","defaultValues","useEffect","subscription","watch","val","unsubscribe","watchedValues","useWatch","control","selectOptions","renderFieldWrapper","renderField","_a","buildPayload","branchCode","toCsv","state","onSubmit","cb","selectedFiltersSummary","summary","config","resolveLabel","opt","find","o","rawSelected","selected","labels","v","Boolean","push","clearAllFilters","reset","k","ReportFilterRowProps","ReportFilterRow","handleClick","e","preventDefault","jsxs","className","children","jsx","onClick","c","u","a","l","m","g","p","w","current","x","TypeError","h","leading","y","trailing","F","A","debounceOnServer","D","Math","max","maxWait","n","T","t","cancelAnimationFrame","requestAnimationFrame","setTimeout","Date","now","min","W","slice","cancel","clearTimeout","isPending","flush","ThemeSettings","dispatch","useDispatch","location","useLocation","id","useParams","show","setShow","openSection","setOpenSection","saved","localStorage","toggleSection","section","prev","getInitialTheme","storedTheme","prefersDark","matchMedia","matches","layoutColor","setLayoutColor","layoutView","setLayoutView","layoutTheme","setLayoutTheme","pathname","basePath","split","selectedDepartment","department","selectedBranch","_b","itemCode","_c","enable","bucket","onFilterSubmit","getValues","basePayload","fetchData","setLoading","setError","setSummaries","setDepartmentSummaries","setItemSummaries","setComparisonSummaries","setBranchSchemeSummaries","branchRes","deptRes","itemRes","comparisonRes","branchSchemeRes","all","catch","summaries","deptData","deptArr","departments","department_summaries","itemData","itemArr","comparisonData","branchSchemeData","msg","fetchDetail","clearData","fetchStart","processed","safeNumber","Number","isFinite","replace","FIELD_MAP","extractField","obj","canonical","candidates","lower","toLowerCase","normalizeItem","it","parentBranch","normalized","Item_Code","Item_Name","Department","category","subcategory","Branch_Code","Branch_Name","item_status","exp_imp_sur","Site_Qtys","Total_Sale_Qty","Total_Sale_Val","Local_HBT_Class","Global_HBT_Class","Stock_Remarks","Stock_Days_Diff","Str_Stk_Sp_Value","Tax_Per_Qty","Mrgn_Per_Qty","Ttl_Mrgn","scheme_type","scheme_group","balance_bin_stock","po_qty","extractItemsFromBranch","Items","ITEMS","ItemsList","itemsList","hasItemCode","item_code","ItemCode","parseCodes","filterCodes","applied_itemCode","isBranchedFlow","allItems","flatMap","branch","rawItems","fetchSuccess","fetchFailure","triggerFetch","fetchDashboardData","debouncedTriggerFetch","useDebouncedCallback","handleFilterSubmit","handleSubmit","document","documentElement","setAttribute","applyTheme","theme","userOverride","mediaQuery","handleChange","initial","addEventListener","removeEventListener","showSettings","darkThemes","lightThemes","resetData","initialTheme","Fragment","Link","to","title","checked","onChange","htmlFor","ImageWithBasePath","src","alt"],"mappings":"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","x_google_ignoreList":[0,1,2,7]}