{"version":3,"file":"index-C8--XPYI.js","sources":["../../src/feature-modules/dynamicpages/controller.tsx","../../src/feature-modules/dynamicpages/index.tsx"],"sourcesContent":["import { useCallback, useEffect, useState } from \"react\";\nimport { useLocation, useNavigate, useParams } from \"react-router-dom\";\nimport { useApiHandler } from \"../../common/utils/customapiHandler\";\n// import { useAuthContext } from \"../../common/AuthContext\";\nimport { useForm } from \"react-hook-form\";\nimport InputSelect, { OptionType } from \"../../common/component/InputSelect\";\nimport { renderField } from \"../../common/utils/renderField\";\nimport moment from \"moment\";\nimport { useSelector } from \"react-redux\";\nimport { RootState } from \"../../redux/store\";\n\n// Define interfaces for the API response\ninterface MasterOption {\n  MasterType: number;\n  MasterCaption: string;\n  MasterValue: string;\n  RecType: number;\n}\n\ninterface OptionData {\n  OptFilterType: number;\n  OptRangeType: number;\n  OptRange: MasterOption[];\n  OptCaption: string;\n  OptDataType: \"Select\" | \"Date\" | \"Yes/No\" | \"Input\";\n  OptVchType: number;\n  OptMasterType: number;\n  OptMasterCode: number;\n  OptMasterValue: string;\n  OptShowCaptionIndex: number;\n  OptRequired: number;\n  OptRecType: number;\n  OptShowAllFiler: number; // Added to interface\n}\n\ninterface DynamicDataState {\n  formData: OptionData[];\n  loading: boolean;\n}\n\ninterface DynamicControllerReturn {\n  id?: string;\n  Name?: string;\n  Caption?: string;\n  form: ReturnType<typeof useForm>;\n  formData: OptionData[];\n  handleSubmit: (data: any) => void;\n  handleCancel: () => void;\n  renderFieldComponent?: any;\n  loading?: any;\n  CompnayName?: string;\n}\n\ninterface FormValues {\n  [key: string]: any;\n}\n\ninterface FormField {\n  OptDataType: string;\n  OptRangeType?: number;\n  OptRange?: MasterOption[];\n  OptCaption: string;\n  OptRequired: number;\n  OptMasterType?: number;\n  OptRecType?: number;\n  OptVchType?: number; // Added to interface\n  OptShowAllFiler?: number; // Added to interface\n}\n\nexport const dynamicController = (): DynamicControllerReturn => {\n  const { id } = useParams<{ id?: string }>();\n  const location = useLocation();\n  const navigate = useNavigate();\n  const { loadTableData, loadDropdownOptions, submitHandler } = useApiHandler();\n  const { RepID, Caption } = location?.state || {};\n  const { decryptedData } = useSelector((state: RootState) => state.authData);\n  const { CompCode, FinYear, CompnayName, ID } = decryptedData || {};\n  console.log(\"sessionData from DynamicRpt\", decryptedData);\n  // const {\n  //   state: { decryptedData: { CompCode, FinYear, CompnayName } = {} },\n  // } = useAuthContext();\n\n  const [dynamicData, setDynamicData] = useState<DynamicDataState>({\n    formData: [],\n    loading: false,\n  });\n\n  const form = useForm<FormValues>({\n    defaultValues: {},\n    mode: \"onChange\",\n  });\n\n  const updateState = useCallback(\n    (newState: Partial<DynamicDataState>) =>\n      setDynamicData((prev) => ({ ...prev, ...newState })),\n    []\n  );\n\n  useEffect(() => {\n    console.log(\n      \"uuuuu=>\",\n      `Report/GetRepOptions?RepID=${RepID}&CompCode=${CompCode}&FY=${FinYear}&UserID=${\n        ID || 0\n      }`\n    );\n    if (RepID && CompCode) {\n      loadTableData({\n        url: `Report/GetRepOptions?RepID=${RepID}&CompCode=${CompCode}&FY=${FinYear}&UserID=${\n          ID || 0\n        }`,\n        setState: setDynamicData,\n        setLoading: (value: any) => updateState({ loading: value }),\n        key: \"formData\",\n      });\n      console.log(\"Reports-sata\", dynamicData);\n    }\n  }, [loadTableData, updateState, RepID, CompCode]);\n\n  const { reset, watch, setValue } = form;\n  const [selectedMasterTypes, setSelectedMasterTypes] = useState<\n    Record<number, string | number>\n  >({});\n  const [selectOptions, setSelectOptions] = useState<\n    Record<number, OptionType[]>\n  >({});\n  const [selectLoading, setSelectLoading] = useState<Record<number, boolean>>(\n    {}\n  );\n\n  const allValues = watch();\n\n  useEffect(() => {\n    reset();\n    setSelectedMasterTypes({});\n    setSelectOptions({});\n    setSelectLoading({});\n  }, [id, reset]);\n\n  // Fetch options for select fields\n  const fetchSelectOptions = useCallback(\n    async (\n      fieldIndex: number,\n      masterType: string | number,\n      recType?: string,\n      OptVchType?: number,\n      OptShowAllFiler?: number,\n      isExtra: boolean = false\n    ) => {\n      console.log(isExtra);\n      updateState({ loading: true });\n      const url = `Report/GetBusyMaster?CompCode=${CompCode}&FY=${FinYear}&MasterType=${masterType}&RecType=${\n        recType || 0\n      }&VchType=${OptVchType}&ShowAllFilter=${OptShowAllFiler}&UserID=${\n        ID || 0\n      }`;\n      console.log(\"url-of-GetBusyMaster\", url);\n      try {\n        setSelectLoading((prev) => ({ ...prev, [fieldIndex]: true }));\n        await loadDropdownOptions({\n          url,\n          setState: (options: OptionType[]) =>\n            setSelectOptions((prev) => ({\n              ...prev,\n              [fieldIndex]: options,\n            })),\n          setLoading: (loading: any) =>\n            setSelectLoading((prev) => ({\n              ...prev,\n              [fieldIndex]: loading,\n            })),\n          valueKey: \"Code\",\n          // labelKey: \"NameAlias\",\n          labelKey: \"Name\",\n          additionalKeys: [\"NameAlias\"],\n        });\n      } catch (error) {\n        console.error(\"Failed to fetch select options:\", error);\n      } finally {\n        updateState({ loading: false });\n      }\n    },\n    [loadDropdownOptions, CompCode, FinYear, updateState]\n  );\n\n  // Set default values on loading\n  useEffect(() => {\n    if (dynamicData.formData.length > 0) {\n      const defaultValues: FormValues = {};\n      const newSelectedMasterTypes: Record<number, string | number> = {};\n      const newSelectOptions: Record<number, OptionType[]> = {};\n\n      dynamicData.formData.forEach((field, index) => {\n        const key = `field-${index}`;\n        const {\n          OptDataType,\n          OptMasterValue,\n          OptRangeType,\n          OptMasterType,\n          OptRecType,\n          OptMasterCode,\n          OptVchType,\n          OptShowAllFiler,\n        } = field;\n\n        if (OptDataType === \"Date\") {\n          const parsedDate = moment(OptMasterValue, [\n            \"DD/MMM/YYYY\",\n            \"DD-MMM-YYYY\",\n          ]);\n          defaultValues[key] = parsedDate.isValid()\n            ? parsedDate.toISOString()\n            : \"\";\n        } else if (OptDataType === \"Yes/No\") {\n          defaultValues[key] = OptMasterValue === \"Yes\" ? 1 : 0;\n        } else if (OptDataType === \"Select\" && OptRangeType === 1) {\n          // Use OptMasterCode as the default value\n          const masterValue =\n            OptMasterCode !== undefined && OptMasterCode !== null\n              ? Number(OptMasterCode)\n              : \"\";\n          defaultValues[key] = masterValue;\n          newSelectedMasterTypes[index] = masterValue;\n\n          // Populate options from OptRange\n          if (field.OptRange) {\n            newSelectOptions[index] = field.OptRange.map((opt) => ({\n              value: opt.MasterType,\n              label: opt.MasterValue,\n              recType: opt.RecType,\n              OptCaption: opt.MasterCaption,\n            }));\n          }\n\n          // Fetch options for extra select if masterValue exists\n          if (masterValue && OptMasterType) {\n            const recType = field.OptRange?.find(\n              (opt) => opt.MasterType === masterValue\n            )?.RecType;\n            if (recType) {\n              fetchSelectOptions(\n                index + 0.5,\n                masterValue,\n                recType as any,\n                OptVchType || 0,\n                OptShowAllFiler || 0,\n                true\n              );\n            }\n          }\n\n          // Set extra select default value if OptMasterCode exists\n          if (OptMasterCode !== undefined && OptMasterCode !== null) {\n            defaultValues[`${key}-extra`] = OptMasterCode.toString();\n          }\n        } else if (OptDataType === \"Select\") {\n          defaultValues[key] =\n            OptMasterCode !== undefined && OptMasterCode !== null\n              ? Number(OptMasterCode)\n              : \"\";\n          if (OptMasterType) {\n            fetchSelectOptions(\n              index,\n              OptMasterType,\n              (OptRecType as any) || 0,\n              OptVchType || 0,\n              OptShowAllFiler || 0,\n              false\n            );\n          }\n        } else {\n          defaultValues[key] = OptMasterValue || \"\";\n        }\n      });\n\n      form.reset(defaultValues);\n      setSelectedMasterTypes(newSelectedMasterTypes);\n      setSelectOptions((prev) => ({ ...prev, ...newSelectOptions }));\n    }\n  }, [dynamicData.formData, form, fetchSelectOptions]);\n\n  // Get static options for select fields with OptRangeType === 1\n  const getDynamicOptions = (field: FormField): OptionType[] => {\n    if (field.OptDataType !== \"Select\" || field.OptRangeType !== 1) return [];\n    return (\n      field.OptRange?.map((opt) => ({\n        value: opt.MasterType,\n        label: opt.MasterValue,\n        recType: opt.RecType,\n        OptCaption: opt.MasterCaption,\n      })) || []\n    );\n  };\n\n  // Handle select change for fields with OptRangeType === 1\n  const handleSelectChange = (\n    fieldIndex: number,\n    selectedOption: OptionType | null\n  ) => {\n    const value = selectedOption?.value ?? \"\";\n    setValue(`field-${fieldIndex}`, value);\n    setSelectedMasterTypes((prev) => ({\n      ...prev,\n      [fieldIndex]: value,\n    }));\n\n    // Clear extra select options and value when main select changes\n    setSelectOptions((prev) => ({ ...prev, [fieldIndex + 0.5]: [] }));\n    setValue(`field-${fieldIndex}-extra`, \"\");\n\n    // Fetch new options for extra select if a valid MasterType is selected\n    if (value && value !== 0 && selectedOption?.recType) {\n      const field = dynamicData.formData[fieldIndex];\n      fetchSelectOptions(\n        fieldIndex + 0.5,\n        value,\n        selectedOption.recType,\n        field.OptVchType || 0,\n        field.OptShowAllFiler || 0,\n        true\n      );\n    }\n  };\n\n  // for non-OptRangeType=1 select fields\n  const handleRegularSelectChange = (\n    fieldIndex: number,\n    selectedOption: OptionType | null\n  ) => {\n    const value = selectedOption?.value ?? \"\";\n    setValue(`field-${fieldIndex}`, value);\n  };\n\n  // for extra select fields\n  const handleExtraSelectChange = (\n    fieldIndex: number,\n    selectedOption: OptionType | null\n  ) => {\n    const value = selectedOption?.value ?? \"\";\n    setValue(`field-${fieldIndex}-extra`, value);\n  };\n\n  const getComponentType = (dataType: string): string => {\n    switch (dataType) {\n      case \"Select\":\n        return \"InputSelect\";\n      case \"Date\":\n        return \"InputDate\";\n      case \"Yes/No\":\n        return \"InputToggle\";\n      case \"Input\":\n        return \"InputField\";\n      default:\n        return \"InputField\";\n    }\n  };\n\n  // Render individual field with extra select\n  const renderFieldComponent = (field: FormField, index: number) => {\n    const key = `field-${index}`;\n    const options =\n      field.OptRangeType === 1\n        ? getDynamicOptions(field)\n        : selectOptions[index] || [];\n    const isLoading = selectLoading[index] || false;\n\n    const fieldSchema: any = {\n      component: getComponentType(field.OptDataType),\n      props: {\n        name: key,\n        label: field.OptCaption,\n        required: field.OptRequired === 1,\n        disabled: false,\n        isClearable: true,\n      },\n    };\n\n    const selectedValue = selectedMasterTypes[index];\n    const selectedOption = options.find((opt) => opt.value === selectedValue);\n\n    const mainField = (\n      <div key={key} className=\"col-md-12 mb-0\">\n        {field.OptDataType === \"Select\" ? (\n          <InputSelect\n            name={key}\n            label={field.OptCaption}\n            options={options}\n            required={field.OptRequired === 1}\n            isDisabled={false}\n            onChange={\n              field.OptRangeType === 1\n                ? (selected: any) => handleSelectChange(index, selected)\n                : (selected: any) => handleRegularSelectChange(index, selected)\n            }\n            isClearable\n            isLoading={isLoading}\n            value={options.find((opt) => opt.value === allValues[key]) || null}\n            // formatOptionLabel={(option, { context }) => {\n            //   return context === \"menu\" ? option.NameAlias : option.label;\n            // }}\n          />\n        ) : (\n          renderField({\n            field: fieldSchema,\n            form,\n            options,\n            key,\n          })\n        )}\n      </div>\n    );\n\n    const extraSelect =\n      field.OptRangeType === 1 &&\n      selectedValue &&\n      selectedValue !== 0 &&\n      selectedOption ? (\n        <div className=\"col-md-12 mb-0\" key={`${key}-extra`}>\n          <InputSelect\n            name={`${key}-extra`}\n            label={selectedOption.OptCaption || \"Additional Select\"}\n            options={selectOptions[index + 0.5] || []}\n            required={field.OptRequired === 1}\n            isDisabled={false}\n            isClearable\n            isLoading={selectLoading[index + 0.5] || false}\n            value={\n              selectOptions[index + 0.5]?.find(\n                (opt) => opt.value === allValues[`${key}-extra`]\n              ) || null\n            }\n            onChange={(selected: any) =>\n              handleExtraSelectChange(index, selected)\n            }\n          />\n        </div>\n      ) : null;\n\n    return [mainField, extraSelect];\n  };\n\n  // date to dd-MMM-yyyy\n  const formatDate = (date: string | Date): string => {\n    if (!date) return \"\";\n    const parsedDate = moment(date);\n    return parsedDate.isValid() ? parsedDate.format(\"DD-MMM-YYYY\") : \"\";\n  };\n\n  const handleSubmit = async (data: FormValues) => {\n    const formattedData = dynamicData.formData.map((field, index) => {\n      const key = `field-${index}`;\n      let optMasterCode = 0;\n      let optMasterValue = \"\";\n      let optMasterType = field.OptMasterType;\n\n      if (field.OptDataType === \"Select\") {\n        if (field.OptRangeType === 1) {\n          // For OptRangeType === 1, use the extra select field\n          const extraKey = `${key}-extra`;\n          const selectedValue = data[extraKey] || \"\";\n          const options = selectOptions[index + 0.5] || [];\n          const selectedOption = options.find(\n            (opt) => opt.value === selectedValue\n          );\n          optMasterCode = selectedValue\n            ? Number(selectedValue)\n            : field.OptMasterCode || 0;\n          optMasterValue = selectedOption?.label || field.OptMasterValue || \"\";\n          const mainSelectedValue = data[key] || \"\";\n          optMasterType = mainSelectedValue\n            ? Number(mainSelectedValue)\n            : field.OptMasterType || 0;\n        } else {\n          // For regular select fields\n          const selectedValue = data[key] || \"\";\n          const options = selectOptions[index] || [];\n          const selectedOption = options.find(\n            (opt) => opt.value === selectedValue\n          );\n          optMasterCode = selectedValue\n            ? Number(selectedValue)\n            : field.OptMasterCode || 0;\n          optMasterValue = selectedOption?.label || field.OptMasterValue || \"\";\n        }\n      } else if (field.OptDataType === \"Date\") {\n        // Format date fields\n        optMasterValue = formatDate(data[key]);\n      } else if (field.OptDataType === \"Yes/No\") {\n        // Yes/No fields\n        optMasterValue = data[key] ? \"Yes\" : \"No\";\n        optMasterCode = data[key] ? 1 : 0;\n      } else if (field.OptDataType === \"Input\") {\n        optMasterValue = data[key] || \"\";\n      }\n\n      return {\n        OptRangeType: field.OptRangeType,\n        OptRange: field.OptRange || [],\n        OptCaption: field.OptCaption,\n        OptDataType: field.OptDataType,\n        OptVchType: field.OptVchType,\n        OptMasterType: optMasterType,\n        OptRecType: field.OptRecType,\n        OptShowAllFiler: field.OptShowAllFiler,\n        OptMasterCode: optMasterCode,\n        OptMasterValue: optMasterValue,\n        OptShowCaptionIndex: field.OptShowCaptionIndex,\n        OptRequired: field.OptRequired,\n        OptFilterType: field.OptFilterType,\n      };\n    });\n\n    try {\n      await submitHandler({\n        url: `Report/GetReportData?RepID=${RepID}&CompCode=${CompCode}&FY=${FinYear}`,\n        method: \"POST\",\n        data: formattedData,\n        setLoading: (value: any) => {\n          updateState({ loading: value });\n        },\n        onSuccess: (data) => {\n          form.reset();\n          const navigateData = {\n            ...data,\n            formattedData: JSON.stringify(formattedData, null, 2),\n            RepID,\n            Caption,\n          };\n          navigate(`/RepList/${id}`, {\n            state: { navigateData },\n          });\n        },\n        onError: (error: any) => {\n          console.error(\"Error saving form:\", error);\n          updateState({ loading: false });\n        },\n      });\n    } catch (error) {\n      console.error(\"Error submitting form:\", error);\n    }\n\n    console.log(\"Form submitted:\", JSON.stringify(formattedData, null, 2));\n  };\n  const handleCancel = () => {\n    form.reset();\n  };\n\n  return {\n    id,\n    Caption,\n    form,\n    formData: dynamicData.formData,\n    handleSubmit,\n    handleCancel,\n    renderFieldComponent,\n    loading: dynamicData.loading,\n    CompnayName,\n  };\n};\n","import React from \"react\";\nimport { dynamicController } from \"./controller\";\nimport Wrapper from \"../../common/uicomponent/wrapper\";\nimport { FormProvider } from \"react-hook-form\";\nimport CenteredLoader from \"../../common/component/CenteredLoader\";\n\nconst DynamicPage: React.FC = () => {\n  const {\n    Caption,\n    form,\n    formData,\n    handleSubmit,\n    // handleCancel,\n    renderFieldComponent,\n    loading,\n    CompnayName,\n  } = dynamicController();\n\n  return (\n    <Wrapper header={Caption ?? \"\"} subHeader={CompnayName}>\n      {formData?.length === 0 && !loading ? (\n        <img\n          src=\"/26691.png\"\n          alt=\"No Data Found\"\n          style={{\n            display: \"flex\",\n            alignItems: \"center\",\n            justifyContent: \"center\",\n            height: \"80vh\",\n            objectFit: \"contain\",\n          }}\n        />\n      ) : (\n        <>\n          {loading && <CenteredLoader />}\n          <FormProvider {...form}>\n            <form onSubmit={form.handleSubmit(handleSubmit)}>\n              <div\n                className=\"card\"\n                // style={{ height: \"70vh\", overflowY: \"auto\" }}\n              >\n                <div className=\"card-body\">\n                  <div className=\"new-employee-field\">\n                    <div className=\"row\">\n                      {formData?.map((field: any, index) => (\n                        <React.Fragment key={`field-wrapper-${index}`}>\n                          {renderFieldComponent(field, index)}\n                        </React.Fragment>\n                      ))}\n                    </div>\n                  </div>\n                </div>\n              </div>\n              <div className=\"text-end mb-1\">\n                <button type=\"submit\" className=\"btn btn-primary\">\n                  Show Report\n                </button>\n              </div>\n            </form>\n          </FormProvider>\n        </>\n      )}\n    </Wrapper>\n  );\n};\n\nexport default DynamicPage;\n"],"names":["dynamicController","id","useParams","location","useLocation","navigate","useNavigate","loadTableData","loadDropdownOptions","submitHandler","useApiHandler","RepID","Caption","state","decryptedData","useSelector","authData","CompCode","FinYear","CompnayName","ID","console","log","dynamicData","setDynamicData","useState","formData","loading","form","useForm","defaultValues","mode","updateState","useCallback","newState","prev","useEffect","url","setState","setLoading","value","key","reset","watch","setValue","selectedMasterTypes","setSelectedMasterTypes","selectOptions","setSelectOptions","selectLoading","setSelectLoading","allValues","fetchSelectOptions","async","fieldIndex","masterType","recType","OptVchType","OptShowAllFiler","isExtra","options","valueKey","labelKey","additionalKeys","error","length","newSelectedMasterTypes","newSelectOptions","forEach","field","index","OptDataType","OptMasterValue","OptRangeType","OptMasterType","OptRecType","OptMasterCode","parsedDate","moment","isValid","toISOString","masterValue","Number","OptRange","map","opt","MasterType","label","MasterValue","RecType","OptCaption","MasterCaption","_b","_a","find","toString","getDynamicOptions","handleSelectChange","selectedOption","handleRegularSelectChange","handleExtraSelectChange","getComponentType","dataType","renderFieldComponent","isLoading","fieldSchema","component","props","name","required","OptRequired","disabled","isClearable","selectedValue","mainField","jsx","className","children","InputSelect","isDisabled","onChange","selected","renderField","extraSelect","formatDate","date","format","handleSubmit","data","formattedData","optMasterCode","optMasterValue","optMasterType","extraKey","mainSelectedValue","OptShowCaptionIndex","OptFilterType","method","onSuccess","navigateData","JSON","stringify","onError","handleCancel","DynamicPage","Wrapper","header","subHeader","jsxs","Fragment","CenteredLoader","FormProvider","onSubmit","React","type","src","alt","style","display","alignItems","justifyContent","height","objectFit"],"mappings":"8WAqEO,MAAMA,kBAAoB,KAC/B,MAAMC,GAAEA,IAAOC,YACTC,SAAWC,cACXC,SAAWC,eACXC,cAAEA,cAAAC,oBAAeA,oBAAAC,cAAqBA,eAAkBC,iBACxDC,MAAEA,MAAAC,QAAOA,UAAY,MAAAT,cAAA,EAAAA,SAAUU,QAAS,CAAA,GACxCC,cAAEA,eAAkBC,YAAaF,OAAqBA,MAAMG,WAC5DC,SAAEA,SAAAC,QAAUA,QAAAC,YAASA,eAAaC,IAAON,eAAiB,CAAA,EAChEO,QAAQC,IAAI,8BAA+BR,eAK3C,MAAOS,YAAaC,gBAAkBC,sBAA2B,CAC/DC,SAAU,GACVC,SAAS,IAGLC,KAAOC,QAAoB,CAC/BC,cAAe,CAAA,EACfC,KAAM,aAGFC,YAAcC,aAAAA,YACjBC,UACCV,eAAgBW,OAAA,IAAeA,QAASD,YAC1C,IAGFE,aAAAA,UAAU,KACRf,QAAQC,IACN,UACA,8BAA8BX,kBAAkBM,eAAeC,kBAC7DE,IAAM,KAGV,GAAIT,OAASM,SAAU,CACrBV,cAAc,CACZ8B,IAAK,8BAA8B1B,kBAAkBM,eAAeC,kBAClEE,IAAM,IAERkB,SAAUd,eACVe,WAAaC,OAAeR,YAAY,CAAEL,QAASa,QACnDC,IAAK,aAEPpB,QAAQC,IAAI,eAAgBC,YAC9B,GACC,CAAChB,cAAeyB,YAAarB,MAAOM,WAEvC,MAAMyB,MAAEA,MAAAC,MAAOA,MAAAC,SAAOA,UAAahB,MAC5BiB,oBAAqBC,wBAA0BrB,aAAAA,SAEpD,CAAA,IACKsB,cAAeC,kBAAoBvB,aAAAA,SAExC,CAAA,IACKwB,cAAeC,kBAAoBzB,aAAAA,SACxC,CAAA,GAGI0B,UAAYR,QAElBP,aAAAA,UAAU,KACRM,QACAI,uBAAuB,CAAA,GACvBE,iBAAiB,CAAA,GACjBE,iBAAiB,CAAA,IAChB,CAACjD,GAAIyC,QAGR,MAAMU,mBAAqBnB,aAAAA,YACzBoB,MACEC,WACAC,WACAC,QACAC,WACAC,gBACAC,SAAmB,KAEnBtC,QAAQC,IAAIqC,SACZ3B,YAAY,CAAEL,SAAS,IACvB,MAAMU,IAAM,iCAAiCpB,eAAeC,sBAAsBqC,sBAChFC,SAAW,aACDC,4BAA4BC,0BACtCtC,IAAM,IAERC,QAAQC,IAAI,uBAAwBe,KACpC,IACEa,iBAAkBf,WAAeA,KAAMmB,CAACA,aAAa,WAC/C9C,oBAAoB,CACxB6B,QACAC,SAAWsB,SACTZ,iBAAkBb,OAAA,IACbA,KACHmB,CAACA,YAAaM,WAElBrB,WAAaZ,SACXuB,iBAAkBf,OAAA,IACbA,KACHmB,CAACA,YAAa3B,WAElBkC,SAAU,OAEVC,SAAU,OACVC,eAAgB,CAAC,cAErB,OAASC,OACP3C,QAAQ2C,MAAM,kCAAmCA,MACnD,CAAA,QACEhC,YAAY,CAAEL,SAAS,GACzB,GAEF,CAACnB,oBAAqBS,SAAUC,QAASc,cAI3CI,aAAAA,UAAU,KACR,GAAIb,YAAYG,SAASuC,OAAS,EAAG,CACnC,MAAMnC,cAA4B,CAAA,EAC5BoC,uBAA0D,CAAA,EAC1DC,iBAAiD,CAAA,EAEvD5C,YAAYG,SAAS0C,QAAQ,CAACC,MAAOC,mBACnC,MAAM7B,IAAM,SAAS6B,SACfC,YACJA,YAAAC,eACAA,eAAAC,aACAA,aAAAC,cACAA,cAAAC,WACAA,WAAAC,cACAA,cAAAnB,WACAA,WAAAC,gBACAA,iBACEW,MAEJ,GAAoB,SAAhBE,YAAwB,CAC1B,MAAMM,WAAaC,MAAON,eAAgB,CACxC,cACA,gBAEF1C,cAAcW,KAAOoC,WAAWE,UAC5BF,WAAWG,cACX,EACN,MAAA,GAA2B,WAAhBT,YACTzC,cAAcW,KAA0B,QAAnB+B,eAA2B,EAAI,OACtD,GAA2B,WAAhBD,aAA6C,IAAjBE,aAAoB,CAEzD,MAAMQ,YACJL,oBACIM,OAAON,eACP,GACN9C,cAAcW,KAAOwC,YACrBf,uBAAuBI,OAASW,YAG5BZ,MAAMc,WACRhB,iBAAiBG,OAASD,MAAMc,SAASC,IAAKC,MAAA,CAC5C7C,MAAO6C,IAAIC,WACXC,MAAOF,IAAIG,YACXhC,QAAS6B,IAAII,QACbC,WAAYL,IAAIM,kBAKpB,GAAIV,aAAeP,cAAe,CAChC,MAAMlB,QAAU,OAAAoC,GAAA,OAAAC,GAAAxB,MAAMc,eAAN,EAAAU,GAAgBC,KAC7BT,KAAQA,IAAIC,aAAeL,mBADd,EAAAW,GAEbH,QACCjC,SACFJ,mBACEkB,MAAQ,GACRW,YACAzB,QACAC,YAAc,EACdC,iBAAmB,GACnB,EAGN,CAGIkB,sBACF9C,cAAc,GAAGW,aAAemC,cAAcmB,WAElD,MAAA,GAA2B,WAAhBxB,YAA0B,CACnCzC,cAAcW,KACZmC,oBACIM,OAAON,eACP,GACFF,eACFtB,mBACEkB,MACAI,cACCC,YAAsB,EACvBlB,YAAc,EACdC,iBAAmB,GACnB,EAGN,MACE5B,cAAcW,KAAO+B,gBAAkB,KAI3C5C,KAAKc,MAAMZ,eACXgB,uBAAuBoB,wBACvBlB,iBAAkBb,OAAA,IAAeA,QAASgC,mBAC5C,GACC,CAAC5C,YAAYG,SAAUE,KAAMwB,qBAGhC,MAAM4C,kBAAqB3B,eACzB,MAA0B,WAAtBA,MAAME,aAAmD,IAAvBF,MAAMI,aAA2B,IAErE,OAAAoB,GAAAxB,MAAMc,eAAN,EAAAU,GAAgBT,IAAKC,MAAA,CACnB7C,MAAO6C,IAAIC,WACXC,MAAOF,IAAIG,YACXhC,QAAS6B,IAAII,QACbC,WAAYL,IAAIM,mBACX,IAKLM,mBAAqB,CACzB3C,WACA4C,kBAEA,MAAM1D,aAAQ0D,qCAAgB1D,QAAS,GACvCI,SAAS,SAASU,aAAcd,OAChCM,uBAAwBX,OAAA,IACnBA,KACHmB,CAACA,YAAad,SAIhBQ,iBAAkBb,OAAA,IAAeA,KAAM,CAACmB,WAAa,IAAM,MAC3DV,SAAS,SAASU,mBAAoB,IAGtC,GAAId,OAAmB,IAAVA,QAAe,MAAA0D,oBAAA,EAAAA,eAAgB1C,SAAS,CACnD,MAAMa,MAAQ9C,YAAYG,SAAS4B,YACnCF,mBACEE,WAAa,GACbd,MACA0D,eAAe1C,QACfa,MAAMZ,YAAc,EACpBY,MAAMX,iBAAmB,GACzB,EAEJ,GAIIyC,0BAA4B,CAChC7C,WACA4C,kBAEA,MAAM1D,aAAQ0D,qCAAgB1D,QAAS,GACvCI,SAAS,SAASU,aAAcd,QAI5B4D,wBAA0B,CAC9B9C,WACA4C,kBAEA,MAAM1D,aAAQ0D,qCAAgB1D,QAAS,GACvCI,SAAS,SAASU,mBAAoBd,QAGlC6D,iBAAoBC,WACxB,OAAQA,UACN,IAAK,SACH,MAAO,cACT,IAAK,OACH,MAAO,YACT,IAAK,SACH,MAAO,cAGT,QACE,MAAO,eAKPC,qBAAuB,CAAClC,MAAkBC,gBAC9C,MAAM7B,IAAM,SAAS6B,QACfV,QACmB,IAAvBS,MAAMI,aACFuB,kBAAkB3B,OAClBtB,cAAcuB,QAAU,GACxBkC,UAAYvD,cAAcqB,SAAU,EAEpCmC,YAAmB,CACvBC,UAAWL,iBAAiBhC,MAAME,aAClCoC,MAAO,CACLC,KAAMnE,IACN8C,MAAOlB,MAAMqB,WACbmB,SAAgC,IAAtBxC,MAAMyC,YAChBC,UAAU,EACVC,aAAa,IAIXC,cAAgBpE,oBAAoByB,OACpC4B,eAAiBtC,QAAQkC,KAAMT,KAAQA,IAAI7C,QAAUyE,eAErDC,UACJC,kBAAAA,IAAC,MAAA,CAAcC,UAAU,iBACtBC,SAAsB,WAAtBhD,MAAME,YACL4C,kBAAAA,IAACG,YAAA,CACCV,KAAMnE,IACN8C,MAAOlB,MAAMqB,WACb9B,gBACAiD,SAAgC,IAAtBxC,MAAMyC,YAChBS,YAAY,EACZC,SACyB,IAAvBnD,MAAMI,aACDgD,UAAkBxB,mBAAmB3B,MAAOmD,UAC5CA,UAAkBtB,0BAA0B7B,MAAOmD,UAE1DT,aAAW,EACXR,oBACAhE,MAAOoB,QAAQkC,KAAMT,KAAQA,IAAI7C,QAAUW,UAAUV,OAAS,OAMhEiF,YAAY,CACVrD,MAAOoC,YACP7E,UACAgC,gBACAnB,WAzBIA,KA+BNkF,YACmB,IAAvBtD,MAAMI,cACNwC,eACkB,IAAlBA,eACAf,eACEiB,kBAAAA,IAAC,MAAA,CAAIC,UAAU,iBACbC,SAAAF,kBAAAA,IAACG,YAAA,CACCV,KAAM,GAAGnE,YACT8C,MAAOW,eAAeR,YAAc,oBACpC9B,QAASb,cAAcuB,MAAQ,KAAQ,GACvCuC,SAAgC,IAAtBxC,MAAMyC,YAChBS,YAAY,EACZP,aAAW,EACXR,UAAWvD,cAAcqB,MAAQ,MAAQ,EACzC9B,OACE,OAAAqD,GAAA9C,cAAcuB,MAAQ,UAAtB,EAAAuB,GAA4BC,KACzBT,KAAQA,IAAI7C,QAAUW,UAAU,GAAGV,gBACjC,KAEP+E,SAAWC,UACTrB,wBAAwB9B,MAAOmD,aAfA,GAAGhF,aAmBtC,KAEN,MAAO,CAACyE,UAAWS,cAIfC,WAAcC,OAClB,IAAKA,KAAM,MAAO,GAClB,MAAMhD,WAAaC,MAAO+C,MAC1B,OAAOhD,WAAWE,UAAYF,WAAWiD,OAAO,eAAiB,IAG7DC,aAAe1E,MAAO2E,OAC1B,MAAMC,cAAgB1G,YAAYG,SAAS0D,IAAI,CAACf,MAAOC,SACrD,MAAM7B,IAAM,SAAS6B,QACrB,IAAI4D,cAAgB,EAChBC,eAAiB,GACjBC,cAAgB/D,MAAMK,cAE1B,GAA0B,WAAtBL,MAAME,YACR,GAA2B,IAAvBF,MAAMI,aAAoB,CAE5B,MAAM4D,SAAW,GAAG5F,YACdwE,cAAgBe,KAAKK,WAAa,GAClCzE,QAAUb,cAAcuB,MAAQ,KAAQ,GACxC4B,eAAiBtC,QAAQkC,KAC5BT,KAAQA,IAAI7C,QAAUyE,eAEzBiB,cAAgBjB,cACZ/B,OAAO+B,eACP5C,MAAMO,eAAiB,EAC3BuD,gBAAiB,MAAAjC,oBAAA,EAAAA,eAAgBX,QAASlB,MAAMG,gBAAkB,GAClE,MAAM8D,kBAAoBN,KAAKvF,MAAQ,GACvC2F,cAAgBE,kBACZpD,OAAOoD,mBACPjE,MAAMK,eAAiB,CAC7B,KAAO,CAEL,MAAMuC,cAAgBe,KAAKvF,MAAQ,GAC7BmB,QAAUb,cAAcuB,QAAU,GAClC4B,eAAiBtC,QAAQkC,KAC5BT,KAAQA,IAAI7C,QAAUyE,eAEzBiB,cAAgBjB,cACZ/B,OAAO+B,eACP5C,MAAMO,eAAiB,EAC3BuD,gBAAiB,MAAAjC,oBAAA,EAAAA,eAAgBX,QAASlB,MAAMG,gBAAkB,EACpE,MACF,GAAiC,SAAtBH,MAAME,YAEf4D,eAAiBP,WAAWI,KAAKvF,WACnC,GAAiC,WAAtB4B,MAAME,YAA0B,CAEzC4D,eAAiBH,KAAKvF,KAAO,MAAQ,KACrCyF,cAAgBF,KAAKvF,KAAO,EAAI,CAClC,KAAiC,UAAtB4B,MAAME,cACf4D,eAAiBH,KAAKvF,MAAQ,IAGhC,MAAO,CACLgC,aAAcJ,MAAMI,aACpBU,SAAUd,MAAMc,UAAY,GAC5BO,WAAYrB,MAAMqB,WAClBnB,YAAaF,MAAME,YACnBd,WAAYY,MAAMZ,WAClBiB,cAAe0D,cACfzD,WAAYN,MAAMM,WAClBjB,gBAAiBW,MAAMX,gBACvBkB,cAAesD,cACf1D,eAAgB2D,eAChBI,oBAAqBlE,MAAMkE,oBAC3BzB,YAAazC,MAAMyC,YACnB0B,cAAenE,MAAMmE,iBAIzB,UACQ/H,cAAc,CAClB4B,IAAK,8BAA8B1B,kBAAkBM,eAAeC,UACpEuH,OAAQ,OACRT,KAAMC,cACN1F,WAAaC,QACXR,YAAY,CAAEL,QAASa,SAEzBkG,UAAYV,QACVpG,KAAKc,QACL,MAAMiG,aAAe,IAChBX,MACHC,cAAeW,KAAKC,UAAUZ,cAAe,KAAM,GACnDtH,YACAC,iBAEFP,SAAS,YAAYJ,KAAM,CACzBY,MAAO,CAAE8H,8BAGbG,QAAU9E,QACR3C,QAAQ2C,MAAM,qBAAsBA,OACpChC,YAAY,CAAEL,SAAS,MAG7B,OAASqC,OACP3C,QAAQ2C,MAAM,yBAA0BA,MAC1C,CAEA3C,QAAQC,IAAI,kBAAmBsH,KAAKC,UAAUZ,cAAe,KAAM,KAE/Dc,aAAe,KACnBnH,KAAKc,SAGP,MAAO,CACLzC,MACAW,gBACAgB,UACAF,SAAUH,YAAYG,SACtBqG,0BACAgB,0BACAxC,0CACA5E,QAASJ,YAAYI,QACrBR,0BCriBE6H,YAAwB,KAC5B,MAAMpI,QACJA,QAAAgB,KACAA,KAAAF,SACAA,SAAAqG,aACAA,aAAAxB,qBAEAA,qBAAA5E,QACAA,QAAAR,YACAA,aACEnB,oBAEJ,OACEmH,kBAAAA,IAAC8B,QAAA,CAAQC,OAAQtI,SAAW,GAAIuI,UAAWhI,YACxCkG,SAAqB,KAArB,MAAA3F,cAAA,EAAAA,SAAUuC,SAAiBtC,QAa1ByH,kBAAAA,KAAAC,2BAAA,CACGhC,SAAA,CAAA1F,+BAAY2H,eAAA,sBACbnC,IAACoC,aAAA,IAAiB3H,KAChByF,SAAA+B,kBAAAA,KAAC,QAAKI,SAAU5H,KAAKmG,aAAaA,cAChCV,SAAA,CAAAF,kBAAAA,IAAC,MAAA,CACCC,UAAU,OAGVC,2BAAAF,IAAC,MAAA,CAAIC,UAAU,YACbC,SAAAF,kBAAAA,IAAC,MAAA,CAAIC,UAAU,qBACbC,SAAAF,kBAAAA,IAAC,MAAA,CAAIC,UAAU,MACZC,wCAAUjC,IAAI,CAACf,MAAYC,QAC1B6C,kBAAAA,IAACsC,MAAMJ,SAAN,CACEhC,8BAAqBhD,MAAOC,QADV,iBAAiBA,oCAQhD6C,IAAC,MAAA,CAAIC,UAAU,gBACbC,SAAAF,kBAAAA,IAAC,SAAA,CAAOuC,KAAK,SAAStC,UAAU,kBAAkBC,SAAA,0BAjC1DF,kBAAAA,IAAC,MAAA,CACCwC,IAAI,aACJC,IAAI,gBACJC,MAAO,CACLC,QAAS,OACTC,WAAY,SACZC,eAAgB,SAChBC,OAAQ,OACRC,UAAW"}